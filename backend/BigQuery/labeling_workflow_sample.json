{
  "table": "labeling_workflow",
  "row_count": 14,
  "sample_count": 14,
  "fetched_at": "2026-01-28T23:23:41.277804",
  "data": [
    {
      "created_at": "2025-08-18T22:16:45.812385",
      "updated_at": "2025-08-18T22:16:49",
      "id": 14,
      "name": "Test Workflow",
      "system_name": "three-trainers",
      "description": "Workflow based on the submit from Aagam.",
      "status": "active",
      "version": 2,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialRole": "trainer-one",
            "initialStatus": "grading"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "description": "Trainer one",
              "name": "Trainer 1",
              "systemName": "trainer-one"
            },
            {
              "description": "Trainer two",
              "name": "Trainer 2",
              "systemName": "trainer-two"
            },
            {
              "description": "Trainer three",
              "name": "Trainer 3",
              "systemName": "trainer-three"
            },
            {
              "description": "Reviewer",
              "name": "Reviewer",
              "systemName": "reviewer"
            }
          ]
        },
        "condition": "(task.status in [\"pending\", \"rework\"]) and (task.batch.status = \"ongoing\") and (task.project.status = \"ongoing\")",
        "stages": {
          "completed": {
            "actions": [
              {
                "condition": "user.role.permissions.has('workflow.labelingPreview')",
                "description": "View Task Details",
                "effects": [
                  {
                    "prepareInitialData": "{\"labeling\": $merge([task.labeling, {\"grades\": [task.labeling.grade1, task.labeling.grade2, task.labeling.grade3]} ])}"
                  }
                ],
                "name": "View Task Details",
                "systemName": "view-task-details",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "($userId:=user.userId;$count(workflow.collaborators[collaboratorId=$userId])=0)",
                "description": "Kickstart Grading",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "status": "grading",
                    "type": "set-workflow-status"
                  },
                  {
                    "preparePatch": "{\"status\": \"labeling\"}",
                    "type": "update-task"
                  }
                ],
                "name": "Kickstart Grading",
                "systemName": "kickstart-grading",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "($userId:=user.userId;$count(workflow.collaborators[collaboratorId=$userId])=0)",
                  "description": "Grade",
                  "effects": [
                    {
                      "prepareInitialData": "{\"labeling\": task.labeling}"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "$exists(task.labeling.grade1) and $exists(task.labeling.grade2)",
                          "effects": [
                            {
                              "role": "trainer-three",
                              "setCurrent": true,
                              "type": "set-current-user-as-collaborator"
                            },
                            {
                              "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput;{\"labeling\":$merge([task.labeling,{\"grade3\": {\"trainerId\":user.userId,\"score\":$userInput.score,\"comment\": $userInput.comment}} ])})",
                              "type": "update-task"
                            }
                          ]
                        },
                        {
                          "condition": "$exists(task.labeling.grade1) and $not($exists(task.labeling.grade2))",
                          "effects": [
                            {
                              "role": "trainer-two",
                              "setCurrent": true,
                              "type": "set-current-user-as-collaborator"
                            },
                            {
                              "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput;{\"labeling\":$merge([task.labeling,{\"grade2\": {\"trainerId\":user.userId,\"score\":$userInput.score,\"comment\": $userInput.comment}} ])})",
                              "type": "update-task"
                            }
                          ]
                        },
                        {
                          "condition": "$not($exists(task.labeling.grade1))",
                          "effects": [
                            {
                              "role": "trainer-one",
                              "setCurrent": true,
                              "type": "set-current-user-as-collaborator"
                            },
                            {
                              "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput;{\"labeling\":$merge([task.labeling,{\"grade1\": {\"trainerId\":user.userId,\"score\":$userInput.score,\"comment\": $userInput.comment}} ])})",
                              "type": "update-task"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($g1:=task.labeling.grade1.score;$g2:=task.labeling.grade2.score;$g3:=task.labeling.grade3.score;$exists:=$g1 and $g2 and $g3;)",
                          "effects": [
                            {
                              "status": "awaiting-review",
                              "type": "set-workflow-status"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Grade",
                  "systemName": "grade",
                  "ui": {
                    "colorScheme": "green"
                  }
                }
              ],
              "name": "Grading",
              "systemName": "grading"
            },
            {
              "actions": [
                {
                  "condition": "($userId:=user.userId;$count(workflow.collaborators[collaboratorId=$userId])=0) and (user.role.permissions.has('reviews.*') or user.role.permissions.has('reviews.createOne')  or user.role.permissions.has('reviews.createMany'))",
                  "description": "Review grades",
                  "effects": [
                    {
                      "prepareInitialData": "{\"labeling\": task.labeling, \"grades\": [task.labeling.grade1, task.labeling.grade2, task.labeling.grade3]}"
                    },
                    {
                      "role": "reviewer",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "completed",
                      "type": "set-workflow-status"
                    },
                    {
                      "preparePatch": "($userInput:=executionLog[effect='request-user-input'].result.userInput;{\"status\":\"completed\",\"completedAt\":$now(),\"labeling\":$merge([task.labeling,{\"review\": {\"score\": $userInput.score,\"comment\": $userInput.comment, \"reviewerId\": user.userId}} ])})",
                      "type": "update-task"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Review Grades",
                  "systemName": "review-grades",
                  "ui": {
                    "colorScheme": "green"
                  }
                }
              ],
              "currentRole": "reviewer",
              "name": "Awaiting Review",
              "systemName": "awaiting-review"
            }
          ]
        }
      },
      "project_id": 34,
      "datastream_metadata": {
        "uuid": "9adcac99-5d19-4da7-8f13-b77e01100111",
        "source_timestamp": 1755555409000
      }
    },
    {
      "created_at": "2025-08-18T19:23:06.188022",
      "updated_at": "2025-08-18T21:37:23",
      "id": 13,
      "name": "Grading Workflow",
      "system_name": "grading-workflow",
      "description": "Grading Workflow",
      "status": "active",
      "version": 3,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialRole": "trainer-one",
            "initialStatus": "grading"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "description": "Trainer one",
              "name": "Trainer 1",
              "systemName": "trainer-one"
            },
            {
              "description": "Trainer two",
              "name": "Trainer 2",
              "systemName": "trainer-two"
            },
            {
              "description": "Trainer three",
              "name": "Trainer 3",
              "systemName": "trainer-three"
            },
            {
              "description": "Reviewer",
              "name": "Reviewer",
              "systemName": "reviewer"
            }
          ]
        },
        "condition": "(task.status in [\"pending\", \"rework\"]) and (task.batch.status = \"ongoing\") and (task.project.status = \"ongoing\")",
        "stages": {
          "completed": {
            "actions": [
              {
                "condition": "user.role.permissions.has('workflow.labelingPreview')",
                "description": "View Task Details",
                "effects": [
                  {
                    "message": "Task Details",
                    "prepareInitialData": "{\"labeling\": $merge([task.labeling, {\"grades\": [task.labeling.grade1, task.labeling.grade2, task.labeling.grade3]} ])}",
                    "schema": {
                      "properties": {
                        "labeling": {
                          "properties": {
                            "answer": {
                              "type": "string"
                            },
                            "grades": {
                              "items": {
                                "properties": {
                                  "comment": {
                                    "type": "string"
                                  },
                                  "score": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "prompt": {
                              "type": "string"
                            },
                            "review": {
                              "properties": {
                                "comment": {
                                  "title": "Feedback",
                                  "type": "string"
                                },
                                "score": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "type": "request-user-input",
                    "uiSchema": {
                      "labeling": {
                        "answer": {
                          "ui:options": {
                            "labelStyle": {
                              "color": "#ff0000",
                              "fontWeight": "bold"
                            },
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Answer",
                            "widget": "markdown"
                          },
                          "ui:readonly": true
                        },
                        "comment": {
                          "ui:options": {
                            "widget": "textarea"
                          }
                        },
                        "grades": {
                          "ui:options": {
                            "tabular": {
                              "columns": [
                                {
                                  "header": "#",
                                  "type": "index",
                                  "width": "40px"
                                },
                                {
                                  "data": "score",
                                  "header": "Score",
                                  "type": "data"
                                },
                                {
                                  "data": "comment",
                                  "header": "Comment",
                                  "type": "data"
                                }
                              ],
                              "prepareRowClassName": "($score:=score; $score=\"Good\" ? \"bg-green\" : $score=\"OK\" ? \"bg-yellow\" : $score=\"Bad\" ? \"bg-red\" : \"\")",
                              "title": "Grading Details"
                            },
                            "widget": "tabular"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "labelStyle": {
                              "color": "#ff0000",
                              "fontWeight": "bold"
                            },
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "markdown"
                          },
                          "ui:readonly": true
                        },
                        "review": {
                          "score": {
                            "ui:options": {
                              "title": "Score",
                              "widget": "textarea"
                            }
                          },
                          "ui:options": {
                            "title": "Review Details"
                          }
                        },
                        "ui:options": {
                          "label": false,
                          "readonly": true
                        },
                        "ui:order": [
                          "prompt",
                          "answer",
                          "grades",
                          "review"
                        ]
                      },
                      "ui:order": [
                        "labeling"
                      ]
                    }
                  }
                ],
                "name": "View Task Details",
                "systemName": "view-task-details",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "($userId:=user.userId;$count(workflow.collaborators[collaboratorId=$userId])=0)",
                "description": "Kickstart Grading",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "status": "grading",
                    "type": "set-workflow-status"
                  },
                  {
                    "preparePatch": "{\"status\": \"labeling\"}",
                    "type": "update-task"
                  }
                ],
                "name": "Kickstart Grading",
                "systemName": "kickstart-grading",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "($userId:=user.userId;$count(workflow.collaborators[collaboratorId=$userId])=0)",
                  "description": "Grade",
                  "effects": [
                    {
                      "message": "Please provide your grade",
                      "prepareInitialData": "{\"labeling\": task.labeling}",
                      "schema": {
                        "allOf": [
                          {
                            "else": {
                              "properties": {
                                "comment": {
                                  "minLength": 10,
                                  "title": "Comments",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "comment"
                              ]
                            },
                            "if": {
                              "properties": {
                                "score": {
                                  "const": "Good"
                                }
                              },
                              "required": [
                                "score"
                              ]
                            },
                            "then": {
                              "properties": {
                                "comment": {
                                  "minLength": 10,
                                  "title": "Comments",
                                  "type": "string"
                                }
                              }
                            }
                          }
                        ],
                        "properties": {
                          "labeling": {
                            "properties": {
                              "answer": {
                                "type": "string"
                              },
                              "prompt": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "score": {
                            "enum": [
                              "Good",
                              "OK",
                              "Bad"
                            ],
                            "title": "Score",
                            "type": "string"
                          }
                        },
                        "required": [
                          "score"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comment": {
                          "ui:options": {
                            "rows": 5
                          },
                          "ui:widget": "textarea"
                        },
                        "labeling": {
                          "answer": {
                            "ui:options": {
                              "labelStyle": {
                                "color": "#ff0000",
                                "fontWeight": "bold"
                              },
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Answer",
                              "widget": "markdown"
                            },
                            "ui:readonly": true
                          },
                          "prompt": {
                            "ui:options": {
                              "labelStyle": {
                                "color": "#ff0000",
                                "fontWeight": "bold"
                              },
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt",
                              "widget": "markdown"
                            },
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false,
                            "readonly": true
                          },
                          "ui:order": [
                            "prompt",
                            "answer"
                          ]
                        },
                        "ui:order": [
                          "labeling",
                          "score",
                          "comment"
                        ]
                      }
                    },
                    {
                      "blocks": [
                        {
                          "condition": "$exists(task.labeling.grade1) and $exists(task.labeling.grade2)",
                          "effects": [
                            {
                              "role": "trainer-three",
                              "setCurrent": true,
                              "type": "set-current-user-as-collaborator"
                            },
                            {
                              "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput;{\"labeling\":$merge([task.labeling,{\"grade3\": {\"trainerId\":user.userId,\"score\":$userInput.score,\"comment\": $userInput.comment}} ])})",
                              "type": "update-task"
                            }
                          ]
                        },
                        {
                          "condition": "$exists(task.labeling.grade1) and $not($exists(task.labeling.grade2))",
                          "effects": [
                            {
                              "role": "trainer-two",
                              "setCurrent": true,
                              "type": "set-current-user-as-collaborator"
                            },
                            {
                              "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput;{\"labeling\":$merge([task.labeling,{\"grade2\": {\"trainerId\":user.userId,\"score\":$userInput.score,\"comment\": $userInput.comment}} ])})",
                              "type": "update-task"
                            }
                          ]
                        },
                        {
                          "condition": "$not($exists(task.labeling.grade1))",
                          "effects": [
                            {
                              "role": "trainer-one",
                              "setCurrent": true,
                              "type": "set-current-user-as-collaborator"
                            },
                            {
                              "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput;{\"labeling\":$merge([task.labeling,{\"grade1\": {\"trainerId\":user.userId,\"score\":$userInput.score,\"comment\": $userInput.comment}} ])})",
                              "type": "update-task"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($g1:=task.labeling.grade1.score;$g2:=task.labeling.grade2.score;$g3:=task.labeling.grade3.score;$exists:=$g1 and $g2 and $g3;)",
                          "effects": [
                            {
                              "status": "awaiting-review",
                              "type": "set-workflow-status"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Grade",
                  "systemName": "grade",
                  "ui": {
                    "colorScheme": "green"
                  }
                }
              ],
              "name": "Grading",
              "systemName": "grading"
            },
            {
              "actions": [
                {
                  "condition": "($userId:=user.userId;$count(workflow.collaborators[collaboratorId=$userId])=0) and (user.role.permissions.has('reviews.*') or user.role.permissions.has('reviews.createOne')  or user.role.permissions.has('reviews.createMany'))",
                  "description": "Review grades",
                  "effects": [
                    {
                      "message": "Review three grades and finalise verdict",
                      "prepareInitialData": "{\"labeling\": task.labeling, \"grades\": [task.labeling.grade1, task.labeling.grade2, task.labeling.grade3]}",
                      "schema": {
                        "properties": {
                          "comment": {
                            "title": "Feedback",
                            "type": "string"
                          },
                          "grades": {
                            "items": {
                              "properties": {
                                "comment": {
                                  "type": "string"
                                },
                                "score": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            },
                            "type": "array"
                          },
                          "labeling": {
                            "properties": {
                              "answer": {
                                "type": "string"
                              },
                              "prompt": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "score": {
                            "enum": [
                              "Good",
                              "OK",
                              "Bad"
                            ],
                            "title": "Final Score",
                            "type": "string"
                          }
                        },
                        "required": [
                          "score"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comment": {
                          "ui:options": {
                            "rows": 5
                          },
                          "ui:widget": "textarea"
                        },
                        "grades": {
                          "ui:options": {
                            "tabular": {
                              "columns": [
                                {
                                  "header": "#",
                                  "type": "index",
                                  "width": "40px"
                                },
                                {
                                  "data": "score",
                                  "header": "Score",
                                  "type": "data"
                                },
                                {
                                  "data": "comment",
                                  "header": "Comment",
                                  "type": "data"
                                }
                              ],
                              "prepareRowClassName": "($score:=score; $score=\"Good\" ? \"bg-green\" : $score=\"OK\" ? \"bg-yellow\" : $score=\"Bad\" ? \"bg-red\" : \"\")",
                              "title": "Grading Details"
                            },
                            "widget": "tabular"
                          }
                        },
                        "labeling": {
                          "answer": {
                            "ui:options": {
                              "labelStyle": {
                                "color": "#ff0000",
                                "fontWeight": "bold"
                              },
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Answer",
                              "widget": "markdown"
                            },
                            "ui:readonly": true
                          },
                          "prompt": {
                            "ui:options": {
                              "labelStyle": {
                                "color": "#ff0000",
                                "fontWeight": "bold"
                              },
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt",
                              "widget": "markdown"
                            },
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false,
                            "readonly": true
                          },
                          "ui:order": [
                            "prompt",
                            "answer"
                          ]
                        },
                        "ui:order": [
                          "labeling",
                          "grades",
                          "score",
                          "comment"
                        ]
                      }
                    },
                    {
                      "role": "reviewer",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "completed",
                      "type": "set-workflow-status"
                    },
                    {
                      "preparePatch": "($userInput:=executionLog[effect='request-user-input'].result.userInput;{\"status\":\"completed\",\"completedAt\":$now(),\"labeling\":$merge([task.labeling,{\"review\": {\"score\": $userInput.score,\"comment\": $userInput.comment, \"reviewerId\": user.userId}} ])})",
                      "type": "update-task"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Review Grades",
                  "systemName": "review-grades",
                  "ui": {
                    "colorScheme": "green"
                  }
                }
              ],
              "currentRole": "reviewer",
              "name": "Awaiting Review",
              "systemName": "awaiting-review"
            }
          ]
        }
      },
      "project_id": 33,
      "datastream_metadata": {
        "uuid": "6cfce0be-1679-4512-8ac5-dd9110001010",
        "source_timestamp": 1755553043000
      }
    },
    {
      "created_at": "2025-07-24T13:29:19.320413",
      "updated_at": "2025-08-25T13:05:50",
      "id": 12,
      "name": "Cuda workflow",
      "system_name": "cuda-workflow",
      "description": "Cuda checklist workflow persist messages.",
      "status": "active",
      "version": 9,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialRole": "trainer",
            "initialStatus": "unclaimed"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "roles": [
            {
              "description": "Trainer",
              "name": "Trainer",
              "systemName": "trainer"
            },
            {
              "description": "Responsible for task review",
              "name": "Reviewer",
              "systemName": "reviewer"
            }
          ]
        },
        "stages": {
          "completed": {
            "actions": [
              {
                "callbackFor": "review.rework",
                "description": "Select state to rework",
                "effects": [
                  {
                    "status": "work-in-progress",
                    "type": "restart-current-workflow"
                  },
                  {
                    "role": "reviewer",
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "role": "trainer",
                    "type": "set-collaborator-current"
                  },
                  {
                    "prepareNotes": "\"Review failed, passing for rework.\"",
                    "preparePatch": "{\"status\": \"rework\"}",
                    "type": "update-task"
                  },
                  {
                    "prepareReceivers": "[workflowInstance.collaborators[role='trainer'].collaborator.slackUserId]",
                    "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='trainer'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": \"Check review\", \"reason\": \"--\", \"stage\": \"Labeling\" })",
                    "safeExecution": true,
                    "template": "feedback-failure",
                    "type": "send-slack-notification"
                  }
                ],
                "name": "Request Rework",
                "systemName": "rework-select-state"
              },
              {
                "callbackFor": "review.none",
                "description": "Mark as review completed",
                "effects": [
                  {
                    "message": "Please complete the reviewer checklist",
                    "schema": {
                      "properties": {
                        "codeQuality": {
                          "properties": {
                            "noCUDALibraries": {
                              "const": true,
                              "title": "No CUDA libraries used",
                              "type": "boolean"
                            },
                            "randomInputsGenerated": {
                              "const": true,
                              "title": "Inputs generated randomly",
                              "type": "boolean"
                            },
                            "readableCode": {
                              "const": true,
                              "title": "Code is readable and organized",
                              "type": "boolean"
                            },
                            "standardLibrariesOnly": {
                              "const": true,
                              "title": "Uses only standard libraries (NumPy, PyTorch)",
                              "type": "boolean"
                            },
                            "validationIncluded": {
                              "const": true,
                              "title": "Includes clear validation test with expected/actual comparison",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "standardLibrariesOnly",
                            "noCUDALibraries",
                            "randomInputsGenerated",
                            "validationIncluded",
                            "readableCode"
                          ],
                          "title": "Code Quality",
                          "type": "object"
                        },
                        "complexityMetadata": {
                          "properties": {
                            "functionDescriptionAccurate": {
                              "const": true,
                              "title": "Is the function description accurate and concise?",
                              "type": "boolean"
                            },
                            "metadataPresent": {
                              "const": true,
                              "title": "All required metadata (review date, reviewer ID, decision) are present",
                              "type": "boolean"
                            },
                            "reviewComplexityTag": {
                              "const": true,
                              "title": "Review complexity tag (Easy / Medium / Hard) — is it justified?",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "reviewComplexityTag",
                            "functionDescriptionAccurate",
                            "metadataPresent"
                          ],
                          "title": "Complexity & Metadata",
                          "type": "object"
                        },
                        "decision": {
                          "enum": [
                            "accept",
                            "reject"
                          ],
                          "enumNames": [
                            "Accept",
                            "Reject (with clear feedback in the notes)"
                          ],
                          "title": "Decision",
                          "type": "string"
                        },
                        "functionalCorrectness": {
                          "properties": {
                            "flagIfIncorrect": {
                              "const": true,
                              "title": "Flag if incorrect (e.g., deconvolution used for gradient computation)",
                              "type": "boolean"
                            },
                            "functionNameCorrect": {
                              "const": true,
                              "title": "Is the function name correct and matches the API spec?",
                              "type": "boolean"
                            },
                            "intentPreserved": {
                              "const": true,
                              "title": "Is the overall intent of the function preserved (e.g., forward, backward, gradient)?",
                              "type": "boolean"
                            },
                            "matchesOperation": {
                              "const": true,
                              "title": "Does the implementation exactly match the API’s intended operation?",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "matchesOperation",
                            "flagIfIncorrect",
                            "functionNameCorrect",
                            "intentPreserved"
                          ],
                          "title": "Functional Correctness",
                          "type": "object"
                        },
                        "fusionChecks": {
                          "properties": {
                            "descriptionClear": {
                              "const": true,
                              "title": "Verify clarity of the fusion description and the intended benefit",
                              "type": "boolean"
                            },
                            "fusionComplexity": {
                              "const": true,
                              "title": "Evaluate fusion complexity and confirm the assigned label",
                              "type": "boolean"
                            },
                            "operationsCompatible": {
                              "const": true,
                              "title": "Ensure all operations in the fusion are compatible and efficiently implementable",
                              "type": "boolean"
                            },
                            "performanceJustified": {
                              "const": true,
                              "title": "Confirm performance justification is clearly stated and reasonable",
                              "type": "boolean"
                            },
                            "realisticFusion": {
                              "const": true,
                              "title": "Check that the fusion is realistic and aligned with expert CUDA practices",
                              "type": "boolean"
                            }
                          },
                          "title": "Level 2 (Fusion) Specific Checks (You can leave this for Level 1)",
                          "type": "object"
                        },
                        "reviewerNotes": {
                          "properties": {
                            "correctnessAssurance": {
                              "title": "Correctness Assurance: Why do you believe the implementation is functionally correct or incorrect?",
                              "type": "string"
                            },
                            "functionalIntent": {
                              "title": "Functional Intent Confirmation : What is the purpose of the function, as interpreted from the API?",
                              "type": "string"
                            }
                          },
                          "required": [
                            "functionalIntent",
                            "correctnessAssurance"
                          ],
                          "title": "Reviewer Notes",
                          "type": "object"
                        },
                        "taskDeclarationVerification": {
                          "properties": {
                            "functionMatchesAPI": {
                              "const": true,
                              "title": "Function description matches the API’s intended purpose",
                              "type": "boolean"
                            },
                            "implementationAligns": {
                              "const": true,
                              "title": "Approve only if the implementation aligns with the justification",
                              "type": "boolean"
                            },
                            "justificationClear": {
                              "const": true,
                              "title": "Trainer’s justification is clear and accurate",
                              "type": "boolean"
                            },
                            "taskIdMentioned": {
                              "const": true,
                              "title": "Task ID is clearly mentioned",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "taskIdMentioned",
                            "functionMatchesAPI",
                            "justificationClear",
                            "implementationAligns"
                          ],
                          "title": "Task declaration verification",
                          "type": "object"
                        },
                        "technicalSpecification": {
                          "properties": {
                            "dataTypesMatch": {
                              "const": true,
                              "title": "Data types used match the spec, such as multiple data types used where applicable.",
                              "type": "boolean"
                            },
                            "requiredOptionalArgs": {
                              "const": true,
                              "title": "Required arguments are implemented; optional ones handled correctly",
                              "type": "boolean"
                            },
                            "tensorShapesConsistent": {
                              "const": true,
                              "title": "Tensor shapes and dimensions are consistent with API",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "dataTypesMatch",
                            "tensorShapesConsistent",
                            "requiredOptionalArgs"
                          ],
                          "title": "Technical Specification",
                          "type": "object"
                        }
                      },
                      "required": [
                        "taskDeclarationVerification",
                        "functionalCorrectness",
                        "technicalSpecification",
                        "codeQuality",
                        "complexityMetadata",
                        "decision",
                        "reviewerNotes"
                      ],
                      "title": "Checklist for Reviewers",
                      "type": "object"
                    },
                    "type": "request-user-input",
                    "uiSchema": {
                      "codeQuality": {
                        "ui:order": [
                          "standardLibrariesOnly",
                          "noCUDALibraries",
                          "randomInputsGenerated",
                          "validationIncluded",
                          "readableCode"
                        ]
                      },
                      "complexityMetadata": {
                        "ui:order": [
                          "reviewComplexityTag",
                          "functionDescriptionAccurate",
                          "metadataPresent"
                        ]
                      },
                      "decision": {
                        "ui:order": [
                          "accept",
                          "reject"
                        ]
                      },
                      "functionalCorrectness": {
                        "ui:order": [
                          "matchesOperation",
                          "flagIfIncorrect",
                          "functionNameCorrect",
                          "intentPreserved"
                        ]
                      },
                      "fusionChecks": {
                        "ui:order": [
                          "realisticFusion",
                          "performanceJustified",
                          "operationsCompatible",
                          "descriptionClear",
                          "fusionComplexity"
                        ]
                      },
                      "reviewerNotes": {
                        "correctnessAssurance": {
                          "ui:options": {
                            "rows": 3
                          },
                          "ui:placeholder": "Add justification...",
                          "ui:widget": "textarea"
                        },
                        "functionalIntent": {
                          "ui:options": {
                            "rows": 3
                          },
                          "ui:placeholder": "Add description...",
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "functionalIntent",
                          "correctnessAssurance"
                        ]
                      },
                      "taskDeclarationVerification": {
                        "ui:order": [
                          "taskIdMentioned",
                          "functionMatchesAPI",
                          "justificationClear",
                          "implementationAligns"
                        ]
                      },
                      "technicalSpecification": {
                        "ui:order": [
                          "dataTypesMatch",
                          "tensorShapesConsistent",
                          "requiredOptionalArgs"
                        ]
                      },
                      "ui:order": [
                        "taskDeclarationVerification",
                        "functionalCorrectness",
                        "technicalSpecification",
                        "codeQuality",
                        "fusionChecks",
                        "complexityMetadata",
                        "decision",
                        "reviewerNotes"
                      ]
                    }
                  },
                  {
                    "role": "reviewer",
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "role": "trainer",
                    "type": "set-collaborator-current"
                  },
                  {
                    "prepareNotes": "\"Prompts are done\"",
                    "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling ? task.labeling : {}, {\"reviewerCheckList\": $userInput}])})",
                    "type": "update-task"
                  },
                  {
                    "reason": "Task completed",
                    "type": "stop-current-workflow"
                  },
                  {
                    "prepareReceivers": "[workflowInstance.collaborators[role='trainer'].collaborator.slackUserId]",
                    "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='trainer'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": \"Check review\", \"reason\": \"--\", \"stage\": \"Labeling\" })",
                    "safeExecution": true,
                    "template": "feedback-success",
                    "type": "send-slack-notification"
                  }
                ],
                "name": "Complete Review",
                "systemName": "complete-review"
              },
              {
                "condition": "(workflow.collaborators[role='trainer'].collaboratorId = user.userId or user.role.permissions.has('conversations.*') or user.role.permissions.has('conversations.assignToMyTeam')) and task.labeling.trainerCheckList != null",
                "description": "View Reviewer Checklist",
                "effects": [
                  {
                    "message": "Trainers Checklist",
                    "prepareInitialData": "(task.labeling.trainerCheckList)",
                    "schema": {
                      "properties": {
                        "level2Fusion": {
                          "properties": {
                            "applyLevel1Checklist": {
                              "const": true,
                              "title": "Apply all Level 1 checklist items to each operation within the fusion",
                              "type": "boolean"
                            },
                            "fusionValidation": {
                              "const": true,
                              "title": "Validation: Assess whether the fusion represents a combination that CUDA experts would realistically implement and find valuable in production environments. Reject fusions that experts would never write or request.",
                              "type": "boolean"
                            },
                            "performanceJustification": {
                              "const": true,
                              "title": "Performance Justication: Verify that the fusion provides meaningful performance benets and addresses real-world use cases.",
                              "type": "boolean"
                            },
                            "technicalFeasibility": {
                              "const": true,
                              "title": "Technical Feasibility: Ensure the fused operations are compatible and can be efficiently implemented as a single kernel.",
                              "type": "boolean"
                            }
                          },
                          "title": "Level 2 (Fusion) Specific (skip if Level 1)",
                          "type": "object"
                        },
                        "metadata": {
                          "properties": {
                            "complexity": {
                              "const": true,
                              "title": "Classify complexity: Easy / Medium / Hard",
                              "type": "boolean"
                            },
                            "description": {
                              "const": true,
                              "title": "Write 1–2 sentence algorithm description",
                              "type": "boolean"
                            },
                            "saveJson": {
                              "const": true,
                              "title": "Save all outputs in structured JSON format",
                              "type": "boolean"
                            },
                            "tagLevel": {
                              "const": true,
                              "title": "Tag as Level 1 (atomic) or Level 2 (fusion)",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "description",
                            "complexity",
                            "tagLevel",
                            "saveJson"
                          ],
                          "title": "Metadata and Deliverables",
                          "type": "object"
                        },
                        "phase1": {
                          "properties": {
                            "completeManually": {
                              "const": true,
                              "title": "For incomplete docs (CUB, Libcu++, RAPIDS), manually complete the signature",
                              "type": "boolean"
                            },
                            "extractFullSignature": {
                              "const": true,
                              "title": "Extract full API signature (name, description, args, return type)",
                              "type": "boolean"
                            },
                            "followOfficialSources": {
                              "title": "Follow official sources (e.g., NVIDIA API docs)",
                              "type": "boolean"
                            },
                            "useOfficialSignature": {
                              "const": true,
                              "title": "If there is a python signature in official documentation (Nvidia API docs), use the same",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "extractFullSignature",
                            "useOfficialSignature",
                            "completeManually",
                            "followOfficialSources"
                          ],
                          "title": "Phase 1: Library Signature Completion",
                          "type": "object"
                        },
                        "phase2": {
                          "properties": {
                            "clearNaming": {
                              "title": "Use clear variable names and documentation",
                              "type": "boolean"
                            },
                            "dataTypesShapes": {
                              "title": "Data Types and Shapes: Ensure all tensor shapes, data types, and dimensional requirements match the original API specification (not just float32 but also float16). Enhance diversity by adding support for multiple data types where applicable.",
                              "type": "boolean"
                            },
                            "ensureFunction": {
                              "title": "Ensure function matches the CUDA-X API operation exactly",
                              "type": "boolean"
                            },
                            "generateRandomInputs": {
                              "title": "Generate random inputs for testing (no external files)",
                              "type": "boolean"
                            },
                            "handleArguments": {
                              "title": "Argument Handling: Verify that required arguments are properly defined and implemented, while optional arguments are handled appropriately (implementation not mandatory).",
                              "type": "boolean"
                            },
                            "implementBothVersions": {
                              "title": "Implement both NumPy and PyTorch versions",
                              "type": "boolean"
                            },
                            "useNumpyPytorch": {
                              "title": "Use NumPy and/or PyTorch only. Make sure no CUDA Python libraries are permitted.",
                              "type": "boolean"
                            },
                            "validateEquivalence": {
                              "title": "Validation Testing: Verify inclusion of test cases that demonstrate NumPy and PyTorch equivalence with at least one test case per implementation.",
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "useNumpyPytorch",
                            "dataTypesShapes",
                            "handleArguments",
                            "generateRandomInputs",
                            "implementBothVersions",
                            "ensureFunction",
                            "validateEquivalence",
                            "clearNaming"
                          ],
                          "title": "Phase 2: Serial Python Implementation",
                          "type": "object"
                        },
                        "task": {
                          "properties": {
                            "taskId": {
                              "type": "string"
                            }
                          },
                          "title": "Task Declaration",
                          "type": "object"
                        },
                        "trainerNotes": {
                          "properties": {
                            "functionDescription": {
                              "title": "Write clear description of function purpose",
                              "type": "string"
                            },
                            "justification": {
                              "title": "Add justification of implementation accuracy",
                              "type": "string"
                            }
                          },
                          "required": [
                            "functionDescription",
                            "justification"
                          ],
                          "title": "Trainer Notes",
                          "type": "object"
                        }
                      },
                      "required": [
                        "task",
                        "phase1",
                        "phase2",
                        "metadata",
                        "trainerNotes"
                      ],
                      "type": "object"
                    },
                    "type": "request-user-input",
                    "uiSchema": {
                      "level2Fusion": {
                        "ui:disabled": true,
                        "ui:order": [
                          "fusionValidation",
                          "performanceJustification",
                          "technicalFeasibility",
                          "applyLevel1Checklist"
                        ]
                      },
                      "metadata": {
                        "ui:disabled": true,
                        "ui:order": [
                          "description",
                          "complexity",
                          "tagLevel",
                          "saveJson"
                        ]
                      },
                      "phase1": {
                        "ui:disabled": true,
                        "ui:order": [
                          "extractFullSignature",
                          "useOfficialSignature",
                          "completeManually",
                          "followOfficialSources"
                        ]
                      },
                      "phase2": {
                        "ui:disabled": true,
                        "ui:order": [
                          "useNumpyPytorch",
                          "dataTypesShapes",
                          "handleArguments",
                          "generateRandomInputs",
                          "implementBothVersions",
                          "ensureFunction",
                          "validateEquivalence",
                          "clearNaming"
                        ]
                      },
                      "task": {
                        "ui:disabled": true
                      },
                      "trainerNotes": {
                        "functionDescription": {
                          "ui:options": {
                            "rows": 3
                          },
                          "ui:placeholder": "Add description...",
                          "ui:widget": "textarea"
                        },
                        "justification": {
                          "ui:options": {
                            "rows": 3
                          },
                          "ui:placeholder": "Add justification...",
                          "ui:widget": "textarea"
                        },
                        "ui:disabled": true,
                        "ui:order": [
                          "functionDescription",
                          "justification"
                        ]
                      },
                      "ui:order": [
                        "task",
                        "phase1",
                        "phase2",
                        "level2Fusion",
                        "metadata",
                        "trainerNotes"
                      ]
                    }
                  }
                ],
                "name": "View Trainers Checklist",
                "systemName": "view-trainers-checklist-ready-for-review"
              },
              {
                "condition": "(workflow.collaborators[role='trainer'].collaboratorId = user.userId or user.role.permissions.has('conversations.*') or user.role.permissions.has('conversations.assignToMyTeam')) and task.labeling.reviewerCheckList != null",
                "description": "View Reviewer Checklist",
                "effects": [
                  {
                    "message": "View reviewer checklist",
                    "prepareInitialData": "(task.labeling.reviewerCheckList)",
                    "schema": {
                      "properties": {
                        "codeQuality": {
                          "properties": {
                            "noCUDALibraries": {
                              "const": true,
                              "title": "No CUDA libraries used",
                              "type": "boolean"
                            },
                            "randomInputsGenerated": {
                              "const": true,
                              "title": "Inputs generated randomly",
                              "type": "boolean"
                            },
                            "readableCode": {
                              "const": true,
                              "title": "Code is readable and organized",
                              "type": "boolean"
                            },
                            "standardLibrariesOnly": {
                              "const": true,
                              "title": "Uses only standard libraries (NumPy, PyTorch)",
                              "type": "boolean"
                            },
                            "validationIncluded": {
                              "const": true,
                              "title": "Includes clear validation test with expected/actual comparison",
                              "type": "boolean"
                            }
                          },
                          "title": "Code Quality",
                          "type": "object"
                        },
                        "complexityMetadata": {
                          "properties": {
                            "functionDescriptionAccurate": {
                              "const": true,
                              "title": "Is the function description accurate and concise?",
                              "type": "boolean"
                            },
                            "metadataPresent": {
                              "const": true,
                              "title": "All required metadata (review date, reviewer ID, decision) are present",
                              "type": "boolean"
                            },
                            "reviewComplexityTag": {
                              "const": true,
                              "title": "Review complexity tag (Easy / Medium / Hard) — is it justified?",
                              "type": "boolean"
                            }
                          },
                          "title": "Complexity & Metadata",
                          "type": "object"
                        },
                        "decision": {
                          "enum": [
                            "accept",
                            "reject"
                          ],
                          "enumNames": [
                            "Accept",
                            "Reject (with clear feedback in the notes)"
                          ],
                          "title": "Decision",
                          "type": "string"
                        },
                        "functionalCorrectness": {
                          "properties": {
                            "flagIfIncorrect": {
                              "const": true,
                              "title": "Flag if incorrect (e.g., deconvolution used for gradient computation)",
                              "type": "boolean"
                            },
                            "functionNameCorrect": {
                              "const": true,
                              "title": "Is the function name correct and matches the API spec?",
                              "type": "boolean"
                            },
                            "intentPreserved": {
                              "const": true,
                              "title": "Is the overall intent of the function preserved (e.g., forward, backward, gradient)?",
                              "type": "boolean"
                            },
                            "matchesOperation": {
                              "const": true,
                              "title": "Does the implementation exactly match the API’s intended operation?",
                              "type": "boolean"
                            }
                          },
                          "title": "Functional Correctness",
                          "type": "object"
                        },
                        "fusionChecks": {
                          "properties": {
                            "descriptionClear": {
                              "const": true,
                              "title": "Verify clarity of the fusion description and the intended benefit",
                              "type": "boolean"
                            },
                            "fusionComplexity": {
                              "const": true,
                              "title": "Evaluate fusion complexity and confirm the assigned label",
                              "type": "boolean"
                            },
                            "operationsCompatible": {
                              "const": true,
                              "title": "Ensure all operations in the fusion are compatible and efficiently implementable",
                              "type": "boolean"
                            },
                            "performanceJustified": {
                              "const": true,
                              "title": "Confirm performance justification is clearly stated and reasonable",
                              "type": "boolean"
                            },
                            "realisticFusion": {
                              "const": true,
                              "title": "Check that the fusion is realistic and aligned with expert CUDA practices",
                              "type": "boolean"
                            }
                          },
                          "title": "Level 2 (Fusion) Specific Checks (You can leave this for Level 1)",
                          "type": "object"
                        },
                        "reviewerNotes": {
                          "properties": {
                            "correctnessAssurance": {
                              "title": "Correctness Assurance: Why do you believe the implementation is functionally correct or incorrect?",
                              "type": "string"
                            },
                            "functionalIntent": {
                              "title": "Functional Intent Confirmation : What is the purpose of the function, as interpreted from the API?",
                              "type": "string"
                            }
                          },
                          "title": "Reviewer Notes",
                          "type": "object"
                        },
                        "taskDeclarationVerification": {
                          "properties": {
                            "functionMatchesAPI": {
                              "const": true,
                              "title": "Function description matches the API’s intended purpose",
                              "type": "boolean"
                            },
                            "implementationAligns": {
                              "const": true,
                              "title": "Approve only if the implementation aligns with the justification",
                              "type": "boolean"
                            },
                            "justificationClear": {
                              "const": true,
                              "title": "Trainer’s justification is clear and accurate",
                              "type": "boolean"
                            },
                            "taskIdMentioned": {
                              "const": true,
                              "title": "Task ID is clearly mentioned",
                              "type": "boolean"
                            }
                          },
                          "title": "Task declaration verification",
                          "type": "object"
                        },
                        "technicalSpecification": {
                          "properties": {
                            "dataTypesMatch": {
                              "const": true,
                              "title": "Data types used match the spec, such as multiple data types used where applicable.",
                              "type": "boolean"
                            },
                            "requiredOptionalArgs": {
                              "const": true,
                              "title": "Required arguments are implemented; optional ones handled correctly",
                              "type": "boolean"
                            },
                            "tensorShapesConsistent": {
                              "const": true,
                              "title": "Tensor shapes and dimensions are consistent with API",
                              "type": "boolean"
                            }
                          },
                          "title": "Technical Specification",
                          "type": "object"
                        }
                      },
                      "title": "Checklist for Reviewers",
                      "type": "object"
                    },
                    "type": "request-user-input",
                    "uiSchema": {
                      "codeQuality": {
                        "ui:disabled": true,
                        "ui:order": [
                          "standardLibrariesOnly",
                          "noCUDALibraries",
                          "randomInputsGenerated",
                          "validationIncluded",
                          "readableCode"
                        ]
                      },
                      "complexityMetadata": {
                        "ui:disabled": true,
                        "ui:order": [
                          "reviewComplexityTag",
                          "functionDescriptionAccurate",
                          "metadataPresent"
                        ]
                      },
                      "decision": {
                        "ui:disabled": true,
                        "ui:order": [
                          "accept",
                          "reject"
                        ]
                      },
                      "functionalCorrectness": {
                        "ui:disabled": true,
                        "ui:order": [
                          "matchesOperation",
                          "flagIfIncorrect",
                          "functionNameCorrect",
                          "intentPreserved"
                        ]
                      },
                      "fusionChecks": {
                        "ui:disabled": true,
                        "ui:order": [
                          "realisticFusion",
                          "performanceJustified",
                          "operationsCompatible",
                          "descriptionClear",
                          "fusionComplexity"
                        ]
                      },
                      "reviewerNotes": {
                        "correctnessAssurance": {
                          "ui:disabled": true,
                          "ui:options": {
                            "rows": 3
                          },
                          "ui:placeholder": "Add justification...",
                          "ui:widget": "textarea"
                        },
                        "functionalIntent": {
                          "ui:disabled": true,
                          "ui:options": {
                            "rows": 3
                          },
                          "ui:placeholder": "Add description...",
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "functionalIntent",
                          "correctnessAssurance"
                        ]
                      },
                      "taskDeclarationVerification": {
                        "ui:disabled": true,
                        "ui:order": [
                          "taskIdMentioned",
                          "functionMatchesAPI",
                          "justificationClear",
                          "implementationAligns"
                        ]
                      },
                      "technicalSpecification": {
                        "ui:disabled": true,
                        "ui:order": [
                          "dataTypesMatch",
                          "tensorShapesConsistent",
                          "requiredOptionalArgs"
                        ]
                      },
                      "ui:order": [
                        "taskDeclarationVerification",
                        "functionalCorrectness",
                        "technicalSpecification",
                        "codeQuality",
                        "fusionChecks",
                        "complexityMetadata",
                        "decision",
                        "reviewerNotes"
                      ]
                    }
                  }
                ],
                "name": "View Reviewers Checklist",
                "systemName": "view-reviewer-checklist-ready-for-review"
              }
            ],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "task.status = \"pending\"",
                "description": "Claim task",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "trainer",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "work-in-progress",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Task claimed by trainer\"",
                    "preparePatch": "{ \"status\": \"labeling\", \"currentUserId\": user.userId }",
                    "type": "update-task"
                  },
                  {
                    "prepareLink": "task.colabLink",
                    "type": "open-link"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='trainer'].collaboratorId = user.userId or user.role.permissions.has('conversations.*') or user.role.permissions.has('conversations.assignToMyTeam')",
                  "description": "Mark as ready for review",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "level2Fusion": {
                            "properties": {
                              "applyLevel1Checklist": {
                                "const": true,
                                "title": "Apply all Level 1 checklist items to each operation within the fusion",
                                "type": "boolean"
                              },
                              "fusionValidation": {
                                "const": true,
                                "title": "Validation: Assess whether the fusion represents a combination that CUDA experts would realistically implement and find valuable in production environments. Reject fusions that experts would never write or request.",
                                "type": "boolean"
                              },
                              "performanceJustification": {
                                "const": true,
                                "title": "Performance Justication: Verify that the fusion provides meaningful performance benets and addresses real-world use cases.",
                                "type": "boolean"
                              },
                              "technicalFeasibility": {
                                "const": true,
                                "title": "Technical Feasibility: Ensure the fused operations are compatible and can be efficiently implemented as a single kernel.",
                                "type": "boolean"
                              }
                            },
                            "title": "Level 2 (Fusion) Specific (skip if Level 1)",
                            "type": "object"
                          },
                          "metadata": {
                            "properties": {
                              "complexity": {
                                "const": true,
                                "title": "Classify complexity: Easy / Medium / Hard",
                                "type": "boolean"
                              },
                              "description": {
                                "const": true,
                                "title": "Write 1–2 sentence algorithm description",
                                "type": "boolean"
                              },
                              "saveJson": {
                                "const": true,
                                "title": "Save all outputs in structured JSON format",
                                "type": "boolean"
                              },
                              "tagLevel": {
                                "const": true,
                                "title": "Tag as Level 1 (atomic) or Level 2 (fusion)",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "description",
                              "complexity",
                              "tagLevel",
                              "saveJson"
                            ],
                            "title": "Metadata and Deliverables",
                            "type": "object"
                          },
                          "phase1": {
                            "properties": {
                              "completeManually": {
                                "const": true,
                                "title": "For incomplete docs (CUB, Libcu++, RAPIDS), manually complete the signature",
                                "type": "boolean"
                              },
                              "extractFullSignature": {
                                "const": true,
                                "title": "Extract full API signature (name, description, args, return type)",
                                "type": "boolean"
                              },
                              "followOfficialSources": {
                                "title": "Follow official sources (e.g., NVIDIA API docs)",
                                "type": "boolean"
                              },
                              "useOfficialSignature": {
                                "const": true,
                                "title": "If there is a python signature in official documentation (Nvidia API docs), use the same",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "extractFullSignature",
                              "useOfficialSignature",
                              "completeManually",
                              "followOfficialSources"
                            ],
                            "title": "Phase 1: Library Signature Completion",
                            "type": "object"
                          },
                          "phase2": {
                            "properties": {
                              "clearNaming": {
                                "title": "Use clear variable names and documentation",
                                "type": "boolean"
                              },
                              "dataTypesShapes": {
                                "title": "Data Types and Shapes: Ensure all tensor shapes, data types, and dimensional requirements match the original API specification (not just float32 but also float16). Enhance diversity by adding support for multiple data types where applicable.",
                                "type": "boolean"
                              },
                              "ensureFunction": {
                                "title": "Ensure function matches the CUDA-X API operation exactly",
                                "type": "boolean"
                              },
                              "generateRandomInputs": {
                                "title": "Generate random inputs for testing (no external files)",
                                "type": "boolean"
                              },
                              "handleArguments": {
                                "title": "Argument Handling: Verify that required arguments are properly defined and implemented, while optional arguments are handled appropriately (implementation not mandatory).",
                                "type": "boolean"
                              },
                              "implementBothVersions": {
                                "title": "Implement both NumPy and PyTorch versions",
                                "type": "boolean"
                              },
                              "useNumpyPytorch": {
                                "title": "Use NumPy and/or PyTorch only. Make sure no CUDA Python libraries are permitted.",
                                "type": "boolean"
                              },
                              "validateEquivalence": {
                                "title": "Validation Testing: Verify inclusion of test cases that demonstrate NumPy and PyTorch equivalence with at least one test case per implementation.",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "useNumpyPytorch",
                              "dataTypesShapes",
                              "handleArguments",
                              "generateRandomInputs",
                              "implementBothVersions",
                              "ensureFunction",
                              "validateEquivalence",
                              "clearNaming"
                            ],
                            "title": "Phase 2: Serial Python Implementation",
                            "type": "object"
                          },
                          "task": {
                            "properties": {
                              "taskId": {
                                "title": "Provide Task ID (e.g., cuDNN_001 or Thrust_scan_15)",
                                "type": "string"
                              }
                            },
                            "required": [
                              "taskId"
                            ],
                            "title": "Task Declaration",
                            "type": "object"
                          },
                          "trainerNotes": {
                            "properties": {
                              "functionDescription": {
                                "title": "Write clear description of function purpose",
                                "type": "string"
                              },
                              "justification": {
                                "title": "Add justification of implementation accuracy",
                                "type": "string"
                              }
                            },
                            "required": [
                              "functionDescription",
                              "justification"
                            ],
                            "title": "Trainer Notes",
                            "type": "object"
                          }
                        },
                        "required": [
                          "task",
                          "phase1",
                          "phase2",
                          "metadata",
                          "trainerNotes",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "level2Fusion": {
                          "ui:order": [
                            "fusionValidation",
                            "performanceJustification",
                            "technicalFeasibility",
                            "applyLevel1Checklist"
                          ]
                        },
                        "metadata": {
                          "ui:order": [
                            "description",
                            "complexity",
                            "tagLevel",
                            "saveJson"
                          ]
                        },
                        "phase1": {
                          "ui:order": [
                            "extractFullSignature",
                            "useOfficialSignature",
                            "completeManually",
                            "followOfficialSources"
                          ]
                        },
                        "phase2": {
                          "ui:order": [
                            "useNumpyPytorch",
                            "dataTypesShapes",
                            "handleArguments",
                            "generateRandomInputs",
                            "implementBothVersions",
                            "ensureFunction",
                            "validateEquivalence",
                            "clearNaming"
                          ]
                        },
                        "trainerNotes": {
                          "functionDescription": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add description...",
                            "ui:widget": "textarea"
                          },
                          "justification": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add justification...",
                            "ui:widget": "textarea"
                          },
                          "ui:order": [
                            "functionDescription",
                            "justification"
                          ]
                        },
                        "ui:order": [
                          "task",
                          "phase1",
                          "phase2",
                          "level2Fusion",
                          "metadata",
                          "trainerNotes",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog[effect='request-user-input'].result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "prepareTotalTime": "executionLog[effect='request-user-input'].result.userInput.durationMinutes",
                      "type": "create-version"
                    },
                    {
                      "prepareVersion": "executionLog[effect='create-version'].result",
                      "type": "persist-messages"
                    },
                    {
                      "status": "ready-for-review",
                      "type": "set-workflow-status"
                    },
                    {
                      "prepareNotes": "\"Prompts are done\"",
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; $filteredInput := $sift($userInput, function($v, $k) { $k != 'durationMinutes' }); {\"labeling\": $merge([task.labeling ? task.labeling : {}, {\"trainerCheckList\": $filteredInput}]), \"status\": \"completed\", \"completedAt\": $now()})",
                      "type": "update-task"
                    },
                    {
                      "prepareReceivers": "[workflowInstance.collaborators[role='reviewer'].collaborator.slackUserId]",
                      "prepareReplacements": "{ \"trainer\": workflowInstance.collaborators[role='reviewer'].collaborator, \"previous\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink }",
                      "safeExecution": true,
                      "template": "next-turn",
                      "type": "send-slack-notification"
                    }
                  ],
                  "name": "Complete",
                  "systemName": "mark-ready-for-review",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "workflow.collaborators[role='trainer'].collaboratorId=user.userId",
                  "description": "Unassign task and revert status",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Provide unclaim reason"
                          },
                          "ui:widget": "textarea"
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect='request-user-input'].result.userInput.reason",
                      "preparePatch": "{ \"status\": \"pending\", \"currentUserId\": null }",
                      "type": "update-task"
                    },
                    {
                      "role": "trainer",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(workflow.collaborators[role='trainer'].collaboratorId = user.userId or user.role.permissions.has('conversations.*') or user.role.permissions.has('conversations.assignToMyTeam')) and task.labeling.trainerCheckList != null",
                  "description": "View Reviewer Checklist",
                  "effects": [
                    {
                      "message": "Trainers Checklist",
                      "prepareInitialData": "(task.labeling.trainerCheckList)",
                      "schema": {
                        "properties": {
                          "level2Fusion": {
                            "properties": {
                              "applyLevel1Checklist": {
                                "const": true,
                                "title": "Apply all Level 1 checklist items to each operation within the fusion",
                                "type": "boolean"
                              },
                              "fusionValidation": {
                                "const": true,
                                "title": "Validation: Assess whether the fusion represents a combination that CUDA experts would realistically implement and find valuable in production environments. Reject fusions that experts would never write or request.",
                                "type": "boolean"
                              },
                              "performanceJustification": {
                                "const": true,
                                "title": "Performance Justication: Verify that the fusion provides meaningful performance benets and addresses real-world use cases.",
                                "type": "boolean"
                              },
                              "technicalFeasibility": {
                                "const": true,
                                "title": "Technical Feasibility: Ensure the fused operations are compatible and can be efficiently implemented as a single kernel.",
                                "type": "boolean"
                              }
                            },
                            "title": "Level 2 (Fusion) Specific (skip if Level 1)",
                            "type": "object"
                          },
                          "metadata": {
                            "properties": {
                              "complexity": {
                                "const": true,
                                "title": "Classify complexity: Easy / Medium / Hard",
                                "type": "boolean"
                              },
                              "description": {
                                "const": true,
                                "title": "Write 1–2 sentence algorithm description",
                                "type": "boolean"
                              },
                              "saveJson": {
                                "const": true,
                                "title": "Save all outputs in structured JSON format",
                                "type": "boolean"
                              },
                              "tagLevel": {
                                "const": true,
                                "title": "Tag as Level 1 (atomic) or Level 2 (fusion)",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "description",
                              "complexity",
                              "tagLevel",
                              "saveJson"
                            ],
                            "title": "Metadata and Deliverables",
                            "type": "object"
                          },
                          "phase1": {
                            "properties": {
                              "completeManually": {
                                "const": true,
                                "title": "For incomplete docs (CUB, Libcu++, RAPIDS), manually complete the signature",
                                "type": "boolean"
                              },
                              "extractFullSignature": {
                                "const": true,
                                "title": "Extract full API signature (name, description, args, return type)",
                                "type": "boolean"
                              },
                              "followOfficialSources": {
                                "title": "Follow official sources (e.g., NVIDIA API docs)",
                                "type": "boolean"
                              },
                              "useOfficialSignature": {
                                "const": true,
                                "title": "If there is a python signature in official documentation (Nvidia API docs), use the same",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "extractFullSignature",
                              "useOfficialSignature",
                              "completeManually",
                              "followOfficialSources"
                            ],
                            "title": "Phase 1: Library Signature Completion",
                            "type": "object"
                          },
                          "phase2": {
                            "properties": {
                              "clearNaming": {
                                "title": "Use clear variable names and documentation",
                                "type": "boolean"
                              },
                              "dataTypesShapes": {
                                "title": "Data Types and Shapes: Ensure all tensor shapes, data types, and dimensional requirements match the original API specification (not just float32 but also float16). Enhance diversity by adding support for multiple data types where applicable.",
                                "type": "boolean"
                              },
                              "ensureFunction": {
                                "title": "Ensure function matches the CUDA-X API operation exactly",
                                "type": "boolean"
                              },
                              "generateRandomInputs": {
                                "title": "Generate random inputs for testing (no external files)",
                                "type": "boolean"
                              },
                              "handleArguments": {
                                "title": "Argument Handling: Verify that required arguments are properly defined and implemented, while optional arguments are handled appropriately (implementation not mandatory).",
                                "type": "boolean"
                              },
                              "implementBothVersions": {
                                "title": "Implement both NumPy and PyTorch versions",
                                "type": "boolean"
                              },
                              "useNumpyPytorch": {
                                "title": "Use NumPy and/or PyTorch only. Make sure no CUDA Python libraries are permitted.",
                                "type": "boolean"
                              },
                              "validateEquivalence": {
                                "title": "Validation Testing: Verify inclusion of test cases that demonstrate NumPy and PyTorch equivalence with at least one test case per implementation.",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "useNumpyPytorch",
                              "dataTypesShapes",
                              "handleArguments",
                              "generateRandomInputs",
                              "implementBothVersions",
                              "ensureFunction",
                              "validateEquivalence",
                              "clearNaming"
                            ],
                            "title": "Phase 2: Serial Python Implementation",
                            "type": "object"
                          },
                          "task": {
                            "properties": {
                              "taskId": {
                                "type": "string"
                              }
                            },
                            "title": "Task Declaration",
                            "type": "object"
                          },
                          "trainerNotes": {
                            "properties": {
                              "functionDescription": {
                                "title": "Write clear description of function purpose",
                                "type": "string"
                              },
                              "justification": {
                                "title": "Add justification of implementation accuracy",
                                "type": "string"
                              }
                            },
                            "required": [
                              "functionDescription",
                              "justification"
                            ],
                            "title": "Trainer Notes",
                            "type": "object"
                          }
                        },
                        "required": [
                          "task",
                          "phase1",
                          "phase2",
                          "metadata",
                          "trainerNotes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "level2Fusion": {
                          "ui:disabled": true,
                          "ui:order": [
                            "fusionValidation",
                            "performanceJustification",
                            "technicalFeasibility",
                            "applyLevel1Checklist"
                          ]
                        },
                        "metadata": {
                          "ui:disabled": true,
                          "ui:order": [
                            "description",
                            "complexity",
                            "tagLevel",
                            "saveJson"
                          ]
                        },
                        "phase1": {
                          "ui:disabled": true,
                          "ui:order": [
                            "extractFullSignature",
                            "useOfficialSignature",
                            "completeManually",
                            "followOfficialSources"
                          ]
                        },
                        "phase2": {
                          "ui:disabled": true,
                          "ui:order": [
                            "useNumpyPytorch",
                            "dataTypesShapes",
                            "handleArguments",
                            "generateRandomInputs",
                            "implementBothVersions",
                            "ensureFunction",
                            "validateEquivalence",
                            "clearNaming"
                          ]
                        },
                        "task": {
                          "ui:disabled": true
                        },
                        "trainerNotes": {
                          "functionDescription": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add description...",
                            "ui:widget": "textarea"
                          },
                          "justification": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add justification...",
                            "ui:widget": "textarea"
                          },
                          "ui:disabled": true,
                          "ui:order": [
                            "functionDescription",
                            "justification"
                          ]
                        },
                        "ui:order": [
                          "task",
                          "phase1",
                          "phase2",
                          "level2Fusion",
                          "metadata",
                          "trainerNotes"
                        ]
                      }
                    }
                  ],
                  "name": "View Trainers Checklist",
                  "systemName": "view-trainers-checklist-ready-for-review"
                }
              ],
              "name": "Work In Progress",
              "systemName": "work-in-progress"
            },
            {
              "actions": [
                {
                  "callbackFor": "review.rework",
                  "description": "Select state to rework",
                  "effects": [
                    {
                      "role": "reviewer",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "role": "trainer",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareNotes": "\"Review failed, passing for rework.\"",
                      "preparePatch": "{\"status\": \"rework\"}",
                      "type": "update-task"
                    },
                    {
                      "status": "work-in-progress",
                      "type": "set-workflow-status"
                    },
                    {
                      "prepareReceivers": "[workflowInstance.collaborators[role='trainer'].collaborator.slackUserId]",
                      "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='trainer'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": \"Check review\", \"reason\": \"--\", \"stage\": \"Labeling\" })",
                      "safeExecution": true,
                      "template": "feedback-failure",
                      "type": "send-slack-notification"
                    }
                  ],
                  "name": "Request Rework",
                  "systemName": "rework-select-state"
                },
                {
                  "callbackFor": "review.none",
                  "description": "Mark as review completed",
                  "effects": [
                    {
                      "message": "Please complete the reviewer checklist",
                      "schema": {
                        "properties": {
                          "codeQuality": {
                            "properties": {
                              "noCUDALibraries": {
                                "const": true,
                                "title": "No CUDA libraries used",
                                "type": "boolean"
                              },
                              "randomInputsGenerated": {
                                "const": true,
                                "title": "Inputs generated randomly",
                                "type": "boolean"
                              },
                              "readableCode": {
                                "const": true,
                                "title": "Code is readable and organized",
                                "type": "boolean"
                              },
                              "standardLibrariesOnly": {
                                "const": true,
                                "title": "Uses only standard libraries (NumPy, PyTorch)",
                                "type": "boolean"
                              },
                              "validationIncluded": {
                                "const": true,
                                "title": "Includes clear validation test with expected/actual comparison",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "standardLibrariesOnly",
                              "noCUDALibraries",
                              "randomInputsGenerated",
                              "validationIncluded",
                              "readableCode"
                            ],
                            "title": "Code Quality",
                            "type": "object"
                          },
                          "complexityMetadata": {
                            "properties": {
                              "functionDescriptionAccurate": {
                                "const": true,
                                "title": "Is the function description accurate and concise?",
                                "type": "boolean"
                              },
                              "metadataPresent": {
                                "const": true,
                                "title": "All required metadata (review date, reviewer ID, decision) are present",
                                "type": "boolean"
                              },
                              "reviewComplexityTag": {
                                "const": true,
                                "title": "Review complexity tag (Easy / Medium / Hard) — is it justified?",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "reviewComplexityTag",
                              "functionDescriptionAccurate",
                              "metadataPresent"
                            ],
                            "title": "Complexity & Metadata",
                            "type": "object"
                          },
                          "decision": {
                            "enum": [
                              "accept",
                              "reject"
                            ],
                            "enumNames": [
                              "Accept",
                              "Reject (with clear feedback in the notes)"
                            ],
                            "title": "Decision",
                            "type": "string"
                          },
                          "functionalCorrectness": {
                            "properties": {
                              "flagIfIncorrect": {
                                "const": true,
                                "title": "Flag if incorrect (e.g., deconvolution used for gradient computation)",
                                "type": "boolean"
                              },
                              "functionNameCorrect": {
                                "const": true,
                                "title": "Is the function name correct and matches the API spec?",
                                "type": "boolean"
                              },
                              "intentPreserved": {
                                "const": true,
                                "title": "Is the overall intent of the function preserved (e.g., forward, backward, gradient)?",
                                "type": "boolean"
                              },
                              "matchesOperation": {
                                "const": true,
                                "title": "Does the implementation exactly match the API’s intended operation?",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "matchesOperation",
                              "flagIfIncorrect",
                              "functionNameCorrect",
                              "intentPreserved"
                            ],
                            "title": "Functional Correctness",
                            "type": "object"
                          },
                          "fusionChecks": {
                            "properties": {
                              "descriptionClear": {
                                "const": true,
                                "title": "Verify clarity of the fusion description and the intended benefit",
                                "type": "boolean"
                              },
                              "fusionComplexity": {
                                "const": true,
                                "title": "Evaluate fusion complexity and confirm the assigned label",
                                "type": "boolean"
                              },
                              "operationsCompatible": {
                                "const": true,
                                "title": "Ensure all operations in the fusion are compatible and efficiently implementable",
                                "type": "boolean"
                              },
                              "performanceJustified": {
                                "const": true,
                                "title": "Confirm performance justification is clearly stated and reasonable",
                                "type": "boolean"
                              },
                              "realisticFusion": {
                                "const": true,
                                "title": "Check that the fusion is realistic and aligned with expert CUDA practices",
                                "type": "boolean"
                              }
                            },
                            "title": "Level 2 (Fusion) Specific Checks (You can leave this for Level 1)",
                            "type": "object"
                          },
                          "reviewerNotes": {
                            "properties": {
                              "correctnessAssurance": {
                                "title": "Correctness Assurance: Why do you believe the implementation is functionally correct or incorrect?",
                                "type": "string"
                              },
                              "functionalIntent": {
                                "title": "Functional Intent Confirmation : What is the purpose of the function, as interpreted from the API?",
                                "type": "string"
                              }
                            },
                            "required": [
                              "functionalIntent",
                              "correctnessAssurance"
                            ],
                            "title": "Reviewer Notes",
                            "type": "object"
                          },
                          "taskDeclarationVerification": {
                            "properties": {
                              "functionMatchesAPI": {
                                "const": true,
                                "title": "Function description matches the API’s intended purpose",
                                "type": "boolean"
                              },
                              "implementationAligns": {
                                "const": true,
                                "title": "Approve only if the implementation aligns with the justification",
                                "type": "boolean"
                              },
                              "justificationClear": {
                                "const": true,
                                "title": "Trainer’s justification is clear and accurate",
                                "type": "boolean"
                              },
                              "taskIdMentioned": {
                                "const": true,
                                "title": "Task ID is clearly mentioned",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "taskIdMentioned",
                              "functionMatchesAPI",
                              "justificationClear",
                              "implementationAligns"
                            ],
                            "title": "Task declaration verification",
                            "type": "object"
                          },
                          "technicalSpecification": {
                            "properties": {
                              "dataTypesMatch": {
                                "const": true,
                                "title": "Data types used match the spec, such as multiple data types used where applicable.",
                                "type": "boolean"
                              },
                              "requiredOptionalArgs": {
                                "const": true,
                                "title": "Required arguments are implemented; optional ones handled correctly",
                                "type": "boolean"
                              },
                              "tensorShapesConsistent": {
                                "const": true,
                                "title": "Tensor shapes and dimensions are consistent with API",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "dataTypesMatch",
                              "tensorShapesConsistent",
                              "requiredOptionalArgs"
                            ],
                            "title": "Technical Specification",
                            "type": "object"
                          }
                        },
                        "required": [
                          "taskDeclarationVerification",
                          "functionalCorrectness",
                          "technicalSpecification",
                          "codeQuality",
                          "complexityMetadata",
                          "decision",
                          "reviewerNotes"
                        ],
                        "title": "Checklist for Reviewers",
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "codeQuality": {
                          "ui:order": [
                            "standardLibrariesOnly",
                            "noCUDALibraries",
                            "randomInputsGenerated",
                            "validationIncluded",
                            "readableCode"
                          ]
                        },
                        "complexityMetadata": {
                          "ui:order": [
                            "reviewComplexityTag",
                            "functionDescriptionAccurate",
                            "metadataPresent"
                          ]
                        },
                        "decision": {
                          "ui:order": [
                            "accept",
                            "reject"
                          ]
                        },
                        "functionalCorrectness": {
                          "ui:order": [
                            "matchesOperation",
                            "flagIfIncorrect",
                            "functionNameCorrect",
                            "intentPreserved"
                          ]
                        },
                        "fusionChecks": {
                          "ui:order": [
                            "realisticFusion",
                            "performanceJustified",
                            "operationsCompatible",
                            "descriptionClear",
                            "fusionComplexity"
                          ]
                        },
                        "reviewerNotes": {
                          "correctnessAssurance": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add justification...",
                            "ui:widget": "textarea"
                          },
                          "functionalIntent": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add description...",
                            "ui:widget": "textarea"
                          },
                          "ui:order": [
                            "functionalIntent",
                            "correctnessAssurance"
                          ]
                        },
                        "taskDeclarationVerification": {
                          "ui:order": [
                            "taskIdMentioned",
                            "functionMatchesAPI",
                            "justificationClear",
                            "implementationAligns"
                          ]
                        },
                        "technicalSpecification": {
                          "ui:order": [
                            "dataTypesMatch",
                            "tensorShapesConsistent",
                            "requiredOptionalArgs"
                          ]
                        },
                        "ui:order": [
                          "taskDeclarationVerification",
                          "functionalCorrectness",
                          "technicalSpecification",
                          "codeQuality",
                          "fusionChecks",
                          "complexityMetadata",
                          "decision",
                          "reviewerNotes"
                        ]
                      }
                    },
                    {
                      "role": "reviewer",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "role": "trainer",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareNotes": "\"Prompts are done\"",
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling ? task.labeling : {}, {\"reviewerCheckList\": $userInput}])})",
                      "type": "update-task"
                    },
                    {
                      "reason": "Task completed",
                      "type": "stop-current-workflow"
                    },
                    {
                      "prepareReceivers": "[workflowInstance.collaborators[role='trainer'].collaborator.slackUserId]",
                      "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='trainer'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": \"Check review\", \"reason\": \"--\", \"stage\": \"Labeling\" })",
                      "safeExecution": true,
                      "template": "feedback-success",
                      "type": "send-slack-notification"
                    }
                  ],
                  "name": "Complete Review",
                  "systemName": "complete-review"
                },
                {
                  "description": "View Trainers Checklist",
                  "effects": [
                    {
                      "message": "Trainers Checklist",
                      "prepareInitialData": "(task.labeling.trainerCheckList)",
                      "schema": {
                        "properties": {
                          "level2Fusion": {
                            "properties": {
                              "applyLevel1Checklist": {
                                "const": true,
                                "title": "Apply all Level 1 checklist items to each operation within the fusion",
                                "type": "boolean"
                              },
                              "fusionValidation": {
                                "const": true,
                                "title": "Validation: Assess whether the fusion represents a combination that CUDA experts would realistically implement and find valuable in production environments. Reject fusions that experts would never write or request.",
                                "type": "boolean"
                              },
                              "performanceJustification": {
                                "const": true,
                                "title": "Performance Justication: Verify that the fusion provides meaningful performance benets and addresses real-world use cases.",
                                "type": "boolean"
                              },
                              "technicalFeasibility": {
                                "const": true,
                                "title": "Technical Feasibility: Ensure the fused operations are compatible and can be efficiently implemented as a single kernel.",
                                "type": "boolean"
                              }
                            },
                            "title": "Level 2 (Fusion) Specific (skip if Level 1)",
                            "type": "object"
                          },
                          "metadata": {
                            "properties": {
                              "complexity": {
                                "const": true,
                                "title": "Classify complexity: Easy / Medium / Hard",
                                "type": "boolean"
                              },
                              "description": {
                                "const": true,
                                "title": "Write 1–2 sentence algorithm description",
                                "type": "boolean"
                              },
                              "saveJson": {
                                "const": true,
                                "title": "Save all outputs in structured JSON format",
                                "type": "boolean"
                              },
                              "tagLevel": {
                                "const": true,
                                "title": "Tag as Level 1 (atomic) or Level 2 (fusion)",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "description",
                              "complexity",
                              "tagLevel",
                              "saveJson"
                            ],
                            "title": "Metadata and Deliverables",
                            "type": "object"
                          },
                          "phase1": {
                            "properties": {
                              "completeManually": {
                                "const": true,
                                "title": "For incomplete docs (CUB, Libcu++, RAPIDS), manually complete the signature",
                                "type": "boolean"
                              },
                              "extractFullSignature": {
                                "const": true,
                                "title": "Extract full API signature (name, description, args, return type)",
                                "type": "boolean"
                              },
                              "followOfficialSources": {
                                "title": "Follow official sources (e.g., NVIDIA API docs)",
                                "type": "boolean"
                              },
                              "useOfficialSignature": {
                                "const": true,
                                "title": "If there is a python signature in official documentation (Nvidia API docs), use the same",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "extractFullSignature",
                              "useOfficialSignature",
                              "completeManually",
                              "followOfficialSources"
                            ],
                            "title": "Phase 1: Library Signature Completion",
                            "type": "object"
                          },
                          "phase2": {
                            "properties": {
                              "clearNaming": {
                                "title": "Use clear variable names and documentation",
                                "type": "boolean"
                              },
                              "dataTypesShapes": {
                                "title": "Data Types and Shapes: Ensure all tensor shapes, data types, and dimensional requirements match the original API specification (not just float32 but also float16). Enhance diversity by adding support for multiple data types where applicable.",
                                "type": "boolean"
                              },
                              "ensureFunction": {
                                "title": "Ensure function matches the CUDA-X API operation exactly",
                                "type": "boolean"
                              },
                              "generateRandomInputs": {
                                "title": "Generate random inputs for testing (no external files)",
                                "type": "boolean"
                              },
                              "handleArguments": {
                                "title": "Argument Handling: Verify that required arguments are properly defined and implemented, while optional arguments are handled appropriately (implementation not mandatory).",
                                "type": "boolean"
                              },
                              "implementBothVersions": {
                                "title": "Implement both NumPy and PyTorch versions",
                                "type": "boolean"
                              },
                              "useNumpyPytorch": {
                                "title": "Use NumPy and/or PyTorch only. Make sure no CUDA Python libraries are permitted.",
                                "type": "boolean"
                              },
                              "validateEquivalence": {
                                "title": "Validation Testing: Verify inclusion of test cases that demonstrate NumPy and PyTorch equivalence with at least one test case per implementation.",
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "useNumpyPytorch",
                              "dataTypesShapes",
                              "handleArguments",
                              "generateRandomInputs",
                              "implementBothVersions",
                              "ensureFunction",
                              "validateEquivalence",
                              "clearNaming"
                            ],
                            "title": "Phase 2: Serial Python Implementation",
                            "type": "object"
                          },
                          "task": {
                            "properties": {
                              "taskId": {
                                "type": "string"
                              }
                            },
                            "title": "Task Declaration",
                            "type": "object"
                          },
                          "trainerNotes": {
                            "properties": {
                              "functionDescription": {
                                "title": "Write clear description of function purpose",
                                "type": "string"
                              },
                              "justification": {
                                "title": "Add justification of implementation accuracy",
                                "type": "string"
                              }
                            },
                            "required": [
                              "functionDescription",
                              "justification"
                            ],
                            "title": "Trainer Notes",
                            "type": "object"
                          }
                        },
                        "required": [
                          "task",
                          "phase1",
                          "phase2",
                          "metadata",
                          "trainerNotes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "level2Fusion": {
                          "ui:disabled": true,
                          "ui:order": [
                            "fusionValidation",
                            "performanceJustification",
                            "technicalFeasibility",
                            "applyLevel1Checklist"
                          ]
                        },
                        "metadata": {
                          "ui:disabled": true,
                          "ui:order": [
                            "description",
                            "complexity",
                            "tagLevel",
                            "saveJson"
                          ]
                        },
                        "phase1": {
                          "ui:disabled": true,
                          "ui:order": [
                            "extractFullSignature",
                            "useOfficialSignature",
                            "completeManually",
                            "followOfficialSources"
                          ]
                        },
                        "phase2": {
                          "ui:disabled": true,
                          "ui:order": [
                            "useNumpyPytorch",
                            "dataTypesShapes",
                            "handleArguments",
                            "generateRandomInputs",
                            "implementBothVersions",
                            "ensureFunction",
                            "validateEquivalence",
                            "clearNaming"
                          ]
                        },
                        "task": {
                          "ui:disabled": true
                        },
                        "trainerNotes": {
                          "functionDescription": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add description...",
                            "ui:widget": "textarea"
                          },
                          "justification": {
                            "ui:options": {
                              "rows": 3
                            },
                            "ui:placeholder": "Add justification...",
                            "ui:widget": "textarea"
                          },
                          "ui:disabled": true,
                          "ui:order": [
                            "functionDescription",
                            "justification"
                          ]
                        },
                        "ui:order": [
                          "task",
                          "phase1",
                          "phase2",
                          "level2Fusion",
                          "metadata",
                          "trainerNotes"
                        ]
                      }
                    }
                  ],
                  "name": "View Trainers Checklist",
                  "systemName": "view-trainers-checklist-ready-for-review"
                }
              ],
              "name": "Ready For Review",
              "omitSystemActions": [
                "approve-for-delivery"
              ],
              "systemName": "ready-for-review"
            }
          ]
        }
      },
      "project_id": 27,
      "datastream_metadata": {
        "uuid": "fbb13b15-7f9c-4d75-9bbb-987d00111001",
        "source_timestamp": 1756127150000
      }
    },
    {
      "created_at": "2025-04-04T14:21:02.995438",
      "updated_at": "2025-04-04T14:21:02.995438",
      "id": 11,
      "name": "example_sft_workflow",
      "system_name": "example_sft_system",
      "description": "Example SFT Workflow test.",
      "status": "draft",
      "version": 1,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 23,
      "datastream_metadata": {
        "uuid": "6512c447-2e3e-4d46-8459-c40f01111001",
        "source_timestamp": 1743776462000
      }
    },
    {
      "created_at": "2025-04-01T13:07:10.008569",
      "updated_at": "2025-04-01T13:07:10.008569",
      "id": 10,
      "name": "Training_Project(Multi-lingual_Team)",
      "system_name": "Training_Project(Multi-lingual_Team)",
      "description": "Training_Project(Multi-lingual_Team)",
      "status": "active",
      "version": 1,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 22,
      "datastream_metadata": {
        "uuid": "3b37017d-f620-4d36-bd84-e5f400011110",
        "source_timestamp": 1743512830000
      }
    },
    {
      "created_at": "2024-10-14T08:47:38.033286",
      "updated_at": "2024-11-19T09:40:56",
      "id": 9,
      "name": "MM SFT Bootcamp Meta",
      "system_name": "MM SFT Bootcamp Meta",
      "description": "",
      "status": "active",
      "version": 8,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 18,
      "datastream_metadata": {
        "uuid": "dbec7a19-03dd-4c1b-b39c-726000010111",
        "source_timestamp": 1732009256000
      }
    },
    {
      "created_at": "2024-10-09T16:23:07.580054",
      "updated_at": "2024-11-19T09:41:16",
      "id": 8,
      "name": "NVIDIA - MM x Delivery",
      "system_name": "MMxBootcamp",
      "description": "",
      "status": "active",
      "version": 13,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 17,
      "datastream_metadata": {
        "uuid": "dbec7a19-03dd-4c1b-b39c-726001110111",
        "source_timestamp": 1732009276000
      }
    },
    {
      "created_at": "2024-09-09T10:47:30.052907",
      "updated_at": "2024-10-25T13:17:18",
      "id": 7,
      "name": "nvidia workflow",
      "system_name": "nvidia-csv-workflow",
      "description": "",
      "status": "active",
      "version": 14,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [
              {
                "condition": "user.role.permissions.has('workflow.labelingPreview')",
                "description": "View task details",
                "effects": [
                  {
                    "message": "All Task Details",
                    "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
                    "schema": {
                      "properties": {
                        "gptResponse": {
                          "properties": {
                            "explanation": {
                              "type": "string"
                            },
                            "response": {
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "humanResponse": {
                          "properties": {
                            "explanation": {
                              "type": "string"
                            },
                            "response": {
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "preview": {
                          "type": "number"
                        },
                        "prompt": {
                          "type": "string"
                        },
                        "promptQA": {
                          "properties": {
                            "feedback": {
                              "type": "string"
                            },
                            "prompt": {
                              "dependencies": {
                                "isCorrect": {
                                  "oneOf": [
                                    {
                                      "properties": {
                                        "containsAnswerInText": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "isCorrect": {
                                          "enum": [
                                            false
                                          ]
                                        },
                                        "isOCR": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "notAQuestion": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "notIntelligible": {
                                          "default": false,
                                          "type": "boolean"
                                        }
                                      }
                                    },
                                    {
                                      "properties": {
                                        "isCorrect": {
                                          "enum": [
                                            true
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "properties": {
                                "creativity": {
                                  "type": "number"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isUnderstandable": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "relevance": {
                                  "type": "number"
                                },
                                "typeOfPrompt": {
                                  "type": "string"
                                }
                              }
                            },
                            "resolution": {
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "result": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        },
                        "responseQA": {
                          "properties": {
                            "explanation": {
                              "properties": {
                                "coherence": {
                                  "type": "number"
                                },
                                "compareWithLLM": {
                                  "type": "string"
                                },
                                "correctness": {
                                  "type": "number"
                                },
                                "helpfulness": {
                                  "type": "number"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "quality": {
                                  "type": "number"
                                }
                              },
                              "type": "object"
                            },
                            "feedback": {
                              "type": "string"
                            },
                            "resolution": {
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "result": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            },
                            "response": {
                              "properties": {
                                "compareWithLLM": {
                                  "type": "string"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "type": "request-user-input",
                    "uiSchema": {
                      "gptResponse": {
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "title": "Auto Response"
                        },
                        "ui:order": [
                          "response",
                          "explanation"
                        ]
                      },
                      "humanResponse": {
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "title": "Human Response"
                        },
                        "ui:order": [
                          "response",
                          "explanation"
                        ]
                      },
                      "preview": {
                        "ui:options": {
                          "widget": "preview"
                        }
                      },
                      "prompt": {
                        "ui:options": {
                          "title": "Prompt",
                          "widget": "pretext"
                        }
                      },
                      "promptQA": {
                        "feedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General Prompt Feedback",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ],
                          "ui:readonly": true
                        },
                        "resolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "ui:options": {
                          "title": "Prompt QA"
                        },
                        "ui:order": [
                          "feedback",
                          "prompt",
                          "resolution"
                        ]
                      },
                      "responseQA": {
                        "explanation": {
                          "coherence": {
                            "ui:options": {
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ],
                          "ui:readonly": true
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General R&E Feedback",
                            "widget": "readonly"
                          }
                        },
                        "resolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "response": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ],
                          "ui:readonly": true
                        },
                        "ui:options": {
                          "title": "Response QA"
                        },
                        "ui:order": [
                          "feedback",
                          "response",
                          "explanation",
                          "resolution"
                        ]
                      },
                      "ui:options": {
                        "classNames": "nvidia-form-layout"
                      },
                      "ui:order": [
                        "preview",
                        "prompt",
                        "humanResponse",
                        "gptResponse",
                        "promptQA",
                        "responseQA"
                      ]
                    }
                  }
                ],
                "name": "View",
                "systemName": "view-task-details-completed"
              }
            ],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "type": "call-open-ai"
                    },
                    {
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "type": "call-open-ai"
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-prompt-qa"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                },
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined }",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-prompt-qa-in-progress"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-response-team"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "type": "call-open-ai"
                    },
                    {
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-response-creation"
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Human Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-qa"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation}",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Human Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-qa-in-progress"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "type": "call-open-ai"
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        }
      },
      "project_id": 13,
      "datastream_metadata": {
        "uuid": "2a6504b1-1e7c-4a05-bbc2-c58510001110",
        "source_timestamp": 1729862238000
      }
    },
    {
      "created_at": "2024-09-08T16:24:51.019715",
      "updated_at": "2024-10-25T13:17:33",
      "id": 6,
      "name": "test",
      "system_name": "test",
      "description": "",
      "status": "active",
      "version": 16,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [
              {
                "condition": "user.role.permissions.has('workflow.labelingPreview')",
                "description": "View task details",
                "effects": [
                  {
                    "message": "All Task Details",
                    "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
                    "schema": {
                      "properties": {
                        "gptResponse": {
                          "properties": {
                            "explanation": {
                              "type": "string"
                            },
                            "response": {
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "humanResponse": {
                          "properties": {
                            "explanation": {
                              "type": "string"
                            },
                            "response": {
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "preview": {
                          "type": "number"
                        },
                        "prompt": {
                          "type": "string"
                        },
                        "promptQA": {
                          "properties": {
                            "feedback": {
                              "type": "string"
                            },
                            "prompt": {
                              "dependencies": {
                                "isCorrect": {
                                  "oneOf": [
                                    {
                                      "properties": {
                                        "containsAnswerInText": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "isCorrect": {
                                          "enum": [
                                            false
                                          ]
                                        },
                                        "isOCR": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "notAQuestion": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "notIntelligible": {
                                          "default": false,
                                          "type": "boolean"
                                        }
                                      }
                                    },
                                    {
                                      "properties": {
                                        "isCorrect": {
                                          "enum": [
                                            true
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "properties": {
                                "creativity": {
                                  "type": "number"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isUnderstandable": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "relevance": {
                                  "type": "number"
                                },
                                "typeOfPrompt": {
                                  "type": "string"
                                }
                              }
                            },
                            "resolution": {
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "result": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        },
                        "responseQA": {
                          "properties": {
                            "explanation": {
                              "properties": {
                                "coherence": {
                                  "type": "number"
                                },
                                "compareWithLLM": {
                                  "type": "string"
                                },
                                "correctness": {
                                  "type": "number"
                                },
                                "helpfulness": {
                                  "type": "number"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "quality": {
                                  "type": "number"
                                }
                              },
                              "type": "object"
                            },
                            "feedback": {
                              "type": "string"
                            },
                            "resolution": {
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "result": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            },
                            "response": {
                              "properties": {
                                "compareWithLLM": {
                                  "type": "string"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "type": "request-user-input",
                    "uiSchema": {
                      "gptResponse": {
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "title": "Auto Response"
                        },
                        "ui:order": [
                          "response",
                          "explanation"
                        ]
                      },
                      "humanResponse": {
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "title": "Human Response"
                        },
                        "ui:order": [
                          "response",
                          "explanation"
                        ]
                      },
                      "preview": {
                        "ui:options": {
                          "widget": "preview"
                        }
                      },
                      "prompt": {
                        "ui:options": {
                          "title": "Prompt",
                          "widget": "pretext"
                        }
                      },
                      "promptQA": {
                        "feedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General Prompt Feedback",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ],
                          "ui:readonly": true
                        },
                        "resolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "ui:options": {
                          "title": "Prompt QA"
                        },
                        "ui:order": [
                          "feedback",
                          "prompt",
                          "resolution"
                        ]
                      },
                      "responseQA": {
                        "explanation": {
                          "coherence": {
                            "ui:options": {
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ],
                          "ui:readonly": true
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General R&E Feedback",
                            "widget": "readonly"
                          }
                        },
                        "resolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "response": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ],
                          "ui:readonly": true
                        },
                        "ui:options": {
                          "title": "Response QA"
                        },
                        "ui:order": [
                          "feedback",
                          "response",
                          "explanation",
                          "resolution"
                        ]
                      },
                      "ui:options": {
                        "classNames": "nvidia-form-layout"
                      },
                      "ui:order": [
                        "preview",
                        "prompt",
                        "humanResponse",
                        "gptResponse",
                        "promptQA",
                        "responseQA"
                      ]
                    }
                  }
                ],
                "name": "View",
                "systemName": "view-task-details-completed"
              }
            ],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "type": "call-open-ai"
                    },
                    {
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "type": "call-open-ai"
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-prompt-qa"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                },
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined }",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-prompt-qa-in-progress"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-response-team"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "type": "call-open-ai"
                    },
                    {
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-response-creation"
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Human Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-qa"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation}",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Human Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-qa-in-progress"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "type": "call-open-ai"
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        }
      },
      "project_id": 12,
      "datastream_metadata": {
        "uuid": "20c4c5ac-82e4-4921-92a0-32d200010100",
        "source_timestamp": 1729862253000
      }
    },
    {
      "created_at": "2024-09-06T19:50:27.631540",
      "updated_at": "2024-11-19T09:41:37",
      "id": 5,
      "name": "NVIDIA - MM Bootcamp",
      "system_name": "NVIDIA - MM Bootcamp",
      "description": "",
      "status": "active",
      "version": 18,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 10,
      "datastream_metadata": {
        "uuid": "b4fa6f58-2c14-4276-a4cd-289b00010110",
        "source_timestamp": 1732009297000
      }
    },
    {
      "created_at": "2024-09-04T11:41:36.250315",
      "updated_at": "2024-11-19T09:42:16",
      "id": 4,
      "name": "NVIDIA - MM Delivery",
      "system_name": "client_delivery",
      "description": "",
      "status": "active",
      "version": 26,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 8,
      "datastream_metadata": {
        "uuid": "7f9c2d94-cace-4eb6-9511-fc4100001011",
        "source_timestamp": 1732009336000
      }
    },
    {
      "created_at": "2024-08-22T15:50:21.001650",
      "updated_at": "2024-10-25T13:18:18",
      "id": 3,
      "name": "Nvidia Test V2 Image",
      "system_name": "nvidia.test.v2.image",
      "description": "",
      "status": "active",
      "version": 19,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [
              {
                "condition": "user.role.permissions.has('workflow.labelingPreview')",
                "description": "View task details",
                "effects": [
                  {
                    "message": "All Task Details",
                    "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
                    "schema": {
                      "properties": {
                        "gptResponse": {
                          "properties": {
                            "explanation": {
                              "type": "string"
                            },
                            "response": {
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "humanResponse": {
                          "properties": {
                            "explanation": {
                              "type": "string"
                            },
                            "response": {
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "preview": {
                          "type": "number"
                        },
                        "prompt": {
                          "type": "string"
                        },
                        "promptQA": {
                          "properties": {
                            "feedback": {
                              "type": "string"
                            },
                            "prompt": {
                              "dependencies": {
                                "isCorrect": {
                                  "oneOf": [
                                    {
                                      "properties": {
                                        "containsAnswerInText": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "isCorrect": {
                                          "enum": [
                                            false
                                          ]
                                        },
                                        "isOCR": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "notAQuestion": {
                                          "default": false,
                                          "type": "boolean"
                                        },
                                        "notIntelligible": {
                                          "default": false,
                                          "type": "boolean"
                                        }
                                      }
                                    },
                                    {
                                      "properties": {
                                        "isCorrect": {
                                          "enum": [
                                            true
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "properties": {
                                "creativity": {
                                  "type": "number"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isUnderstandable": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "relevance": {
                                  "type": "number"
                                },
                                "typeOfPrompt": {
                                  "type": "string"
                                }
                              }
                            },
                            "resolution": {
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "result": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        },
                        "responseQA": {
                          "properties": {
                            "explanation": {
                              "properties": {
                                "coherence": {
                                  "type": "number"
                                },
                                "compareWithLLM": {
                                  "type": "string"
                                },
                                "correctness": {
                                  "type": "number"
                                },
                                "helpfulness": {
                                  "type": "number"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "quality": {
                                  "type": "number"
                                }
                              },
                              "type": "object"
                            },
                            "feedback": {
                              "type": "string"
                            },
                            "resolution": {
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "result": {
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            },
                            "response": {
                              "properties": {
                                "compareWithLLM": {
                                  "type": "string"
                                },
                                "isCorrect": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "type": "request-user-input",
                    "uiSchema": {
                      "gptResponse": {
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "title": "Auto Response"
                        },
                        "ui:order": [
                          "response",
                          "explanation"
                        ]
                      },
                      "humanResponse": {
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "title": "Human Response"
                        },
                        "ui:order": [
                          "response",
                          "explanation"
                        ]
                      },
                      "preview": {
                        "ui:options": {
                          "widget": "preview"
                        }
                      },
                      "prompt": {
                        "ui:options": {
                          "title": "Prompt",
                          "widget": "pretext"
                        }
                      },
                      "promptQA": {
                        "feedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General Prompt Feedback",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ],
                          "ui:readonly": true
                        },
                        "resolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "ui:options": {
                          "title": "Prompt QA"
                        },
                        "ui:order": [
                          "feedback",
                          "prompt",
                          "resolution"
                        ]
                      },
                      "responseQA": {
                        "explanation": {
                          "coherence": {
                            "ui:options": {
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ],
                          "ui:readonly": true
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General R&E Feedback",
                            "widget": "readonly"
                          }
                        },
                        "resolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "response": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ],
                          "ui:readonly": true
                        },
                        "ui:options": {
                          "title": "Response QA"
                        },
                        "ui:order": [
                          "feedback",
                          "response",
                          "explanation",
                          "resolution"
                        ]
                      },
                      "ui:options": {
                        "classNames": "nvidia-form-layout"
                      },
                      "ui:order": [
                        "preview",
                        "prompt",
                        "humanResponse",
                        "gptResponse",
                        "promptQA",
                        "responseQA"
                      ]
                    }
                  }
                ],
                "name": "View",
                "systemName": "view-task-details-completed"
              }
            ],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "type": "call-open-ai"
                    },
                    {
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "type": "call-open-ai"
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-prompt-qa"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                },
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined }",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-prompt-qa-in-progress"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-response-team"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "type": "call-open-ai"
                    },
                    {
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-response-creation"
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Human Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-waiting-qa"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation}",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "user.role.permissions.has('workflow.labelingPreview')",
                  "description": "View task details",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "gptResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "gptResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Auto Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Human Response"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse",
                          "gptResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-details-qa-in-progress"
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "type": "call-open-ai"
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        }
      },
      "project_id": 6,
      "datastream_metadata": {
        "uuid": "cd864852-593d-4ba4-8995-652e00011000",
        "source_timestamp": 1729862298000
      }
    },
    {
      "created_at": "2024-08-02T10:19:38.904891",
      "updated_at": "2024-11-19T09:42:42",
      "id": 2,
      "name": "Nvidia Multimodality Workflow",
      "system_name": "nvidia_default_workflow_v1",
      "description": "",
      "status": "active",
      "version": 36,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 4,
      "datastream_metadata": {
        "uuid": "7f9c2d94-cace-4eb6-9511-fc4101011100",
        "source_timestamp": 1732009362000
      }
    },
    {
      "created_at": "2024-07-22T13:02:58.741690",
      "updated_at": "2024-11-19T09:37:35",
      "id": 1,
      "name": "Nvidia Image Labeling",
      "system_name": "demo.nvidia",
      "description": "View labeling actions",
      "status": "active",
      "version": 44,
      "configuration": {
        "assignment": {
          "directTaskAssignment": {
            "initialStatus": "prompt-creation"
          },
          "distribute": {
            "algorithms": [
              {
                "type": "diverse-spread"
              },
              {
                "type": "round-robin"
              }
            ]
          }
        },
        "collaborators": {
          "allowMultiple": false,
          "roles": [
            {
              "applicationRole": "Trainer",
              "description": "Create prompt based on the image",
              "name": "Prompt Team",
              "systemName": "prompt-team"
            },
            {
              "applicationRole": "Trainer",
              "description": "Answer the prompt question and provide explanation",
              "name": "Response and Explanation Team",
              "systemName": "response-and-explanation-team"
            },
            {
              "applicationRole": "Squad Lead",
              "description": "Review prompt and response quality",
              "name": "QA Team",
              "systemName": "qa-team"
            }
          ]
        },
        "condition": "\n  (task.status in [\"pending\", \"rework\"])\n  and (task.batch.status = \"ongoing\")\n  and (task.project.status = \"ongoing\")\n ",
        "historyConfiguration": {
          "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
          "schema": {
            "properties": {
              "humanResponse": {
                "properties": {
                  "explanation": {
                    "type": "string"
                  },
                  "response": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "preview": {
                "type": "number"
              },
              "prompt": {
                "type": "string"
              },
              "promptQA": {
                "properties": {
                  "feedback": {
                    "type": "string"
                  },
                  "prompt": {
                    "dependencies": {
                      "isCorrect": {
                        "oneOf": [
                          {
                            "properties": {
                              "containsAnswerInText": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isCorrect": {
                                "enum": [
                                  false
                                ]
                              },
                              "isOCR": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notAQuestion": {
                                "default": false,
                                "type": "boolean"
                              },
                              "notIntelligible": {
                                "default": false,
                                "type": "boolean"
                              }
                            }
                          },
                          {
                            "properties": {
                              "isCorrect": {
                                "enum": [
                                  true
                                ]
                              }
                            }
                          }
                        ]
                      }
                    },
                    "properties": {
                      "creativity": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "isUnderstandable": {
                        "default": false,
                        "type": "boolean"
                      },
                      "relevance": {
                        "type": "number"
                      },
                      "typeOfPrompt": {
                        "type": "string"
                      }
                    }
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              },
              "responseQA": {
                "properties": {
                  "explanation": {
                    "properties": {
                      "coherence": {
                        "type": "number"
                      },
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "correctness": {
                        "type": "number"
                      },
                      "helpfulness": {
                        "type": "number"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      },
                      "quality": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "feedback": {
                    "type": "string"
                  },
                  "resolution": {
                    "properties": {
                      "reason": {
                        "type": "string"
                      },
                      "result": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "response": {
                    "properties": {
                      "compareWithLLM": {
                        "type": "string"
                      },
                      "isCorrect": {
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "uiSchema": {
            "humanResponse": {
              "explanation": {
                "ui:options": {
                  "title": "Step by step explanation",
                  "widget": "readonly"
                }
              },
              "response": {
                "ui:options": {
                  "title": "Response",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "title": "Human Response"
              },
              "ui:order": [
                "response",
                "explanation"
              ]
            },
            "preview": {
              "ui:options": {
                "widget": "preview"
              }
            },
            "prompt": {
              "ui:options": {
                "title": "Prompt",
                "widget": "pretext"
              }
            },
            "promptQA": {
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General Prompt Feedback",
                  "widget": "readonly"
                }
              },
              "prompt": {
                "containsAnswerInText": {
                  "ui:options": {
                    "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                  }
                },
                "creativity": {
                  "ui:options": {
                    "title": "Creativity"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Basic requirements in check?"
                  }
                },
                "isOCR": {
                  "ui:options": {
                    "title": "Asks for simple extractive tasks or OCR"
                  }
                },
                "isUnderstandable": {
                  "ui:options": {
                    "title": "Understandable?"
                  }
                },
                "notAQuestion": {
                  "ui:options": {
                    "title": "Doesn't require the image to answer the question"
                  }
                },
                "notIntelligible": {
                  "ui:options": {
                    "title": "Are not intelligible and clear to understand"
                  }
                },
                "relevance": {
                  "ui:options": {
                    "title": "Relevance"
                  }
                },
                "typeOfPrompt": {
                  "ui:options": {
                    "title": "Type of prompt"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "notAQuestion",
                  "isOCR",
                  "containsAnswerInText",
                  "notIntelligible",
                  "isUnderstandable",
                  "relevance",
                  "creativity",
                  "typeOfPrompt"
                ],
                "ui:readonly": true
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "ui:options": {
                "title": "Prompt QA"
              },
              "ui:order": [
                "feedback",
                "prompt",
                "resolution"
              ]
            },
            "responseQA": {
              "explanation": {
                "coherence": {
                  "ui:options": {
                    "title": "Coherence/Clarity"
                  }
                },
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human explanation with LLM explanation"
                  }
                },
                "correctness": {
                  "ui:options": {
                    "title": "Correctness/Completeness"
                  }
                },
                "helpfulness": {
                  "ui:options": {
                    "title": "Helpfulness/Understanding (overall rating)"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is explanation correct?"
                  }
                },
                "quality": {
                  "ui:options": {
                    "title": "Quality/Chain of thought"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM",
                  "helpfulness",
                  "correctness",
                  "coherence",
                  "quality"
                ],
                "ui:readonly": true
              },
              "feedback": {
                "ui:options": {
                  "rows": 4,
                  "title": "General R&E Feedback",
                  "widget": "readonly"
                }
              },
              "resolution": {
                "ui:options": {
                  "field": "tmpl",
                  "title": "QA Resolution",
                  "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                }
              },
              "response": {
                "compareWithLLM": {
                  "ui:options": {
                    "title": "Compare human response with LLM response"
                  }
                },
                "isCorrect": {
                  "ui:options": {
                    "chakra": {
                      "fontWeight": "bold"
                    },
                    "title": "Is response correct?"
                  }
                },
                "ui:options": {
                  "classNames": "compact",
                  "label": false
                },
                "ui:order": [
                  "isCorrect",
                  "compareWithLLM"
                ],
                "ui:readonly": true
              },
              "ui:options": {
                "title": "Response QA"
              },
              "ui:order": [
                "feedback",
                "response",
                "explanation",
                "resolution"
              ]
            },
            "ui:options": {
              "classNames": "nvidia-form-layout"
            },
            "ui:order": [
              "preview",
              "prompt",
              "promptQA",
              "humanResponse",
              "responseQA"
            ]
          }
        },
        "stages": {
          "completed": {
            "actions": [],
            "name": "Completed",
            "systemName": "completed"
          },
          "initial": {
            "actions": [
              {
                "condition": "\n  (task.status = \"pending\")\n ",
                "description": "Claim this task for prompt creation.",
                "effects": [
                  {
                    "type": "start-current-workflow"
                  },
                  {
                    "role": "prompt-team",
                    "setCurrent": true,
                    "type": "set-current-user-as-collaborator"
                  },
                  {
                    "status": "prompt-creation",
                    "type": "set-workflow-status"
                  },
                  {
                    "prepareNotes": "\"Claiming as prompt team member\"",
                    "preparePatch": "\n          {\n            \"status\": \"labeling\",\n            \"currentUserId\": user.userId\n          }\n            ",
                    "type": "update-task"
                  }
                ],
                "name": "Claim",
                "systemName": "claim-task-for-prompting",
                "ui": {
                  "colorScheme": "green"
                }
              }
            ],
            "name": "Unclaimed",
            "systemName": "unclaimed"
          },
          "statuses": [
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and task.parentId=null",
                  "description": "Create Variation for this task",
                  "effects": [
                    {
                      "message": "Confirmation",
                      "prepareInitialData": "{'confirmationMessage': 'Are you sure you want to create variation for this task?'}",
                      "schema": {
                        "properties": {
                          "confirmationMessage": {
                            "type": "string"
                          }
                        }
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "confirmationMessage": {
                          "ui:options": {
                            "title": "",
                            "widget": "readonly"
                          }
                        }
                      }
                    },
                    {
                      "type": "create-variation"
                    }
                  ],
                  "name": "Create Variation",
                  "systemName": "create-variation",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide prompt for this task",
                  "effects": [
                    {
                      "message": "Please enter prompt for the image below",
                      "prepareInitialData": "{ \"preview\": task.id, \"promptHints\": task.labeling.promptHints }",
                      "schema": {
                        "properties": {
                          "comments": {
                            "minLength": 5,
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "minLength": 10,
                            "type": "string"
                          },
                          "promptCategory": {
                            "default": "open-ended",
                            "oneOf": [
                              {
                                "const": "open-ended",
                                "title": "Open ended question"
                              },
                              {
                                "const": "mcq",
                                "title": "Multiple choice question"
                              }
                            ],
                            "type": "string"
                          },
                          "promptHints": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "prompt",
                          "promptCategory",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "comments": {
                          "ui:options": {
                            "rows": 2,
                            "title": "Comments/Feedback (optional)"
                          },
                          "ui:widget": "textarea"
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 7,
                            "title": "Please enter prompt for the image above"
                          },
                          "ui:widget": "textarea"
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "radio"
                          }
                        },
                        "promptHints": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt Hints",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "promptHints",
                          "prompt",
                          "promptCategory",
                          "comments",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($userInput := executionLog[effect='request-user-input'].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $userInput.prompt, \"promptCategory\": $userInput.promptCategory, \"promptComments\": $userInput.comments }]), \"currentUserId\": workflow.collaborators[role='qa-team'] ? workflowInstance.collaborators[role='qa-team'].collaboratorId : task.currentUserId })",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({ \"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, { \"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.prompt}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($response := executionLog[effect='call-open-ai'].result; {'prompt': task.labeling.prompt, 'checkResult': $response.reviewResults[0] })",
                      "schema": {
                        "properties": {
                          "checkResult": {
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "checkResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Prompt"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "prompt",
                          "checkResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][0].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($response := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"prompt\": $response.prompt }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'prompt-qa-in-progress': 'waiting-prompt-qa')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'][1].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'][1].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Prompt",
                  "systemName": "write-prompt",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "$count($filter(workflow.collaborators[role=\"prompt-team\"],  function ($v) { \n $v.collaboratorId = user.userId})) = 1",
                  "description": "Unclaim this task",
                  "effects": [
                    {
                      "message": "Please provide reason",
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:order": [
                          "reason"
                        ],
                        "ui:submitButtonOptions": {
                          "norender": true
                        }
                      }
                    },
                    {
                      "prepareNotes": "executionLog[effect=\"request-user-input\"].result.userInput.reason",
                      "preparePatch": "{\n\"status\": \"pending\", \n \"currentUserId\": null}",
                      "type": "update-task"
                    },
                    {
                      "role": "prompt-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "type": "stop-current-workflow"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-task",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.promptQA.resolution.result='failure'",
                  "description": "View Prompt QA feedback",
                  "effects": [
                    {
                      "message": "Prompt QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptQA\": task.labeling.promptQA }",
                      "schema": {
                        "properties": {
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-prompt-qa-feedback"
                }
              ],
              "currentRole": "prompt-team",
              "name": "Prompt Creation",
              "systemName": "prompt-creation"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "prompt-qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for Prompt QA",
                  "systemName": "claim-task-for-prompt-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-prompt-qa"
                }
              ],
              "name": "Waiting Prompt QA",
              "systemName": "waiting-prompt-qa"
            },
            {
              "actions": [
                {
                  "condition": "workflow.collaborators[role='qa-team' and collaboratorId=$$.user.userId]",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Prompt is incorrect\",\n            \"result\": $result(formData.promptQA.isCorrect)\n        },\n        {\n            \"reason\": \"Prompt doesn't require the image to answer the question\",\n            \"result\": $result($not(formData.promptQA.notAQuestion))\n        },\n        {\n            \"reason\": \"Prompt is not intelligible and clear to understand\",\n            \"result\": $result($not(formData.promptQA.notIntelligible))\n        },\n        {\n            \"reason\": \"Prompt asks for simple extractive tasks or OCR\",\n            \"result\": $result($not(formData.promptQA.isOCR))\n        },\n        {\n            \"reason\": \"Prompt states the information necessary to answer the prompt within the question itself, removing the need for visual reasoning\",\n            \"result\": $result($not(formData.promptQA.containsAnswerInText))\n        },\n        {\n            \"reason\": \"Relevance is below 4\",\n            \"result\": formData.promptQA.relevance ? $result(formData.promptQA.relevance >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Creativity is below 4\",\n            \"result\": formData.promptQA.creativity ? $result(formData.promptQA.creativity >= 4) : 'unknown'\n        },\n        {\n            \"reason\": \"Prompt is not understandable\",\n            \"result\": $result(formData.promptQA.isUnderstandable)\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Proceed to response creation' : $result ='failure' ? 'Request prompt author to rewrite the prompt' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for this prompt",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": {\"image\": task.id, \"promptHints\": task.labeling.promptHints}, \"prompt\": task.labeling.prompt, \"promptCategory\": task.labeling.promptCategory, \"promptComments\": task.labeling.promptComments ? task.labeling.promptComments : undefined, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='prompt-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "action": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "preview": {
                            "properties": {
                              "image": {
                                "type": "number"
                              },
                              "promptHints": {
                                "minLength": 10,
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptComments": {
                            "type": "string"
                          },
                          "promptFeedback": {
                            "type": "string"
                          },
                          "promptQA": {
                            "dependencies": {
                              "isCorrect": {
                                "oneOf": [
                                  {
                                    "properties": {
                                      "containsAnswerInText": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "isCorrect": {
                                        "enum": [
                                          false
                                        ]
                                      },
                                      "isOCR": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notAQuestion": {
                                        "default": false,
                                        "type": "boolean"
                                      },
                                      "notIntelligible": {
                                        "default": false,
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "properties": {
                                      "isCorrect": {
                                        "enum": [
                                          true
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            "properties": {
                              "creativity": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "isUnderstandable": {
                                "default": false,
                                "type": "boolean"
                              },
                              "relevance": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "typeOfPrompt": {
                                "oneOf": [
                                  {
                                    "const": "certain",
                                    "title": "Certain - prompt requests information that can be provided with certainty, the response should provide it."
                                  },
                                  {
                                    "const": "uncertain",
                                    "title": "Uncertain - prompt asks for information that cannot be verified, the response should attempt to answer the prompt as a human would and state the uncertainty or subjectivity of the response."
                                  }
                                ],
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes",
                          "promptFeedback"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "preview": {
                          "image": {
                            "ui:options": {
                              "widget": "preview"
                            }
                          },
                          "promptHints": {
                            "ui:options": {
                              "style": {
                                "backgroundColor": "#384450",
                                "borderRadius": "5px",
                                "padding": "10px"
                              },
                              "title": "Prompt Hints",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "Preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "mapping": {
                              "mcq": "Multiple choice question",
                              "open-ended": "Open ended question"
                            },
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptComments": {
                          "ui:options": {
                            "title": "Comments",
                            "widget": "readonly"
                          }
                        },
                        "promptFeedback": {
                          "ui:options": {
                            "rows": 4,
                            "title": "General prompt feedback",
                            "widget": "textarea"
                          }
                        },
                        "promptQA": {
                          "containsAnswerInText": {
                            "ui:options": {
                              "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                            }
                          },
                          "creativity": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Extremely basic"
                                },
                                {
                                  "label": "Generic"
                                },
                                {
                                  "label": "Good balance of general/specific"
                                },
                                {
                                  "label": "Insightful"
                                },
                                {
                                  "label": "Novel, thought-provoking"
                                }
                              ],
                              "title": "Creativity"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Basic requirements in check?"
                            }
                          },
                          "isOCR": {
                            "ui:options": {
                              "title": "Asks for simple extractive tasks or OCR"
                            }
                          },
                          "isUnderstandable": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "style": {
                                "marginBottom": "10px",
                                "marginTop": "10px"
                              },
                              "title": "Understandable?"
                            }
                          },
                          "notAQuestion": {
                            "ui:options": {
                              "title": "Doesn't require the image to answer the question"
                            }
                          },
                          "notIntelligible": {
                            "ui:options": {
                              "title": "Are not intelligible and clear to understand"
                            }
                          },
                          "relevance": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "Completely off-topic and unaligned"
                                },
                                {
                                  "label": "Misses out on the major focus area(s) of the image"
                                },
                                {
                                  "label": "Very little importance to the focus area(s)"
                                },
                                {
                                  "label": "Misses out on the few important focus area(s)"
                                },
                                {
                                  "label": "Perfectly aligned with the focus area(s) of the image"
                                }
                              ],
                              "title": "Relevance"
                            }
                          },
                          "typeOfPrompt": {
                            "ui:options": {
                              "title": "Type of prompt"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "notAQuestion",
                            "isOCR",
                            "containsAnswerInText",
                            "notIntelligible",
                            "isUnderstandable",
                            "relevance",
                            "creativity",
                            "typeOfPrompt"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "Prompt Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "promptComments",
                          "promptCategory",
                          "promptQA",
                          "promptFeedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"promptQA\": {\"prompt\":  $response.promptQA,\"feedback\": $response.promptFeedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action }}}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'proceed to response creation')",
                          "effects": [
                            {
                              "prepareStatus": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-creation': 'waiting-response-team')",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA passed successfully \"",
                              "preparePatch": "\n          {\n            \"status\": \"labeling\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareRole": "(workflowInstance.collaborators[role='response-and-explanation-team'] ? 'response-and-explanation-team': 'qa-team')",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink, \"feedback\": $response.promptFeedback, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request prompt author to rewrite the prompt')",
                          "effects": [
                            {
                              "role": "prompt-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "status": "prompt-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Prompt QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n          }\n            ",
                              "type": "update-task"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='prompt-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='prompt-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.promptFeedback, \"reason\": $response.QAResolution.reason, \"stage\": \"Prompt QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Prompt Feedback",
                  "systemName": "provide-prompt-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-qa-in-progress"
                }
              ],
              "currentRole": "qa-team",
              "name": "Prompt QA in Progress",
              "systemName": "prompt-qa-in-progress"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "description": "Claim this task for response creation.",
                  "effects": [
                    {
                      "role": "response-and-explanation-team",
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "response-creation",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim",
                  "systemName": "claim-task-for-response",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"prompt-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task prompt",
                  "effects": [
                    {
                      "message": "Task Details",
                      "prepareInitialData": "({ 'preview': task.id, 'prompt': task.labeling.prompt, 'promptCategory': task.labeling.promptCategory, 'promptQA': task.labeling.promptQA })",
                      "schema": {
                        "properties": {
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "promptCategory": {
                            "type": "string"
                          },
                          "promptQA": {
                            "properties": {
                              "feedback": {
                                "type": "string"
                              },
                              "prompt": {
                                "dependencies": {
                                  "isCorrect": {
                                    "oneOf": [
                                      {
                                        "properties": {
                                          "containsAnswerInText": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "isCorrect": {
                                            "enum": [
                                              false
                                            ]
                                          },
                                          "isOCR": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notAQuestion": {
                                            "default": false,
                                            "type": "boolean"
                                          },
                                          "notIntelligible": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      {
                                        "properties": {
                                          "isCorrect": {
                                            "enum": [
                                              true
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "properties": {
                                  "creativity": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "isUnderstandable": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "relevance": {
                                    "type": "number"
                                  },
                                  "typeOfPrompt": {
                                    "type": "string"
                                  }
                                }
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "promptCategory": {
                          "ui:options": {
                            "title": "Prompt category",
                            "widget": "readonly"
                          }
                        },
                        "promptQA": {
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General Prompt Feedback",
                              "widget": "readonly"
                            }
                          },
                          "prompt": {
                            "containsAnswerInText": {
                              "ui:options": {
                                "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                              }
                            },
                            "creativity": {
                              "ui:options": {
                                "title": "Creativity"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Basic requirements in check?"
                              }
                            },
                            "isOCR": {
                              "ui:options": {
                                "title": "Asks for simple extractive tasks or OCR"
                              }
                            },
                            "isUnderstandable": {
                              "ui:options": {
                                "title": "Understandable?"
                              }
                            },
                            "notAQuestion": {
                              "ui:options": {
                                "title": "Doesn't require the image to answer the question"
                              }
                            },
                            "notIntelligible": {
                              "ui:options": {
                                "title": "Are not intelligible and clear to understand"
                              }
                            },
                            "relevance": {
                              "ui:options": {
                                "title": "Relevance"
                              }
                            },
                            "typeOfPrompt": {
                              "ui:options": {
                                "title": "Type of prompt"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "notAQuestion",
                              "isOCR",
                              "containsAnswerInText",
                              "notIntelligible",
                              "isUnderstandable",
                              "relevance",
                              "creativity",
                              "typeOfPrompt"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "prompt"
                          ]
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "promptCategory",
                          "promptQA"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-prompt-waiting-response-team"
                }
              ],
              "name": "Waiting Response Team",
              "systemName": "waiting-response-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Open response and explanation dialog",
                  "effects": [
                    {
                      "message": "Please provide response for the prompt and detailed explanation",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt }",
                      "schema": {
                        "properties": {
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "minLength": 10,
                            "type": "string"
                          }
                        },
                        "required": [
                          "response",
                          "explanation",
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Step by  step explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 5,
                            "title": "Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "response",
                          "explanation",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, {\"response\": $response.response, \"explanation\": $response.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareRequest": "({\"messages\": [ {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": promptText}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.response}]}, {\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": executionLog[effect='request-user-input'].result.userInput.explanation}]} ]})",
                      "prepareResponse": "($eval(response.choices[0].message.content))",
                      "promptConfigName": "labeling.llm.grammarCheckPrompt",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "message": "Grammar & Spelling check results",
                      "prepareInitialData": "($aiResponse:= executionLog[effect='call-open-ai'].result; {'response': task.labeling.response, 'responseCheckResult': $aiResponse.reviewResults[0], 'explanation': task.labeling.explanation, 'explanationCheckResult': $aiResponse.reviewResults[1] })",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "explanationCheckResult": {
                            "type": "object"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseCheckResult": {
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "rows": 7,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Explanation"
                          },
                          "ui:widget": "textarea"
                        },
                        "explanationCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "response": {
                          "ui:options": {
                            "rows": 4,
                            "style": {
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Original Response"
                          },
                          "ui:widget": "textarea"
                        },
                        "responseCheckResult": {
                          "ui:options": {
                            "field": "map-parser",
                            "style": {
                              "backgroundColor": "#384450"
                            }
                          }
                        },
                        "ui:order": [
                          "response",
                          "responseCheckResult",
                          "explanation",
                          "explanationCheckResult"
                        ]
                      }
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "prepareNotes": "\"Prompt text corrections based on LLM hints \"",
                      "preparePatch": "($input := executionLog[effect='request-user-input'][1].result.userInput; {\"labeling\": $merge([task.labeling, { \"response\": $input.response, \"explanation\": $input.explanation }])})",
                      "type": "update-task"
                    },
                    {
                      "prepareStatus": "(workflowInstance.collaborators[role='qa-team'] ? 'qa-in-progress': 'waiting-qa-team')",
                      "type": "set-workflow-status"
                    },
                    {
                      "role": "qa-team",
                      "type": "set-collaborator-current"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    }
                  ],
                  "name": "Write Response",
                  "systemName": "write-response",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1)",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 4,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        },
                        "ui:order": [
                          "reason"
                        ]
                      }
                    },
                    {
                      "role": "response-and-explanation-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-response-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-response",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "task.labeling.responseQA.resolution.result='failure'",
                  "description": "View Response QA feedback",
                  "effects": [
                    {
                      "message": "Response QA Feedback",
                      "prepareInitialData": "{\"prompt\": task.labeling.prompt, \"response\": task.labeling.response, \"explanation\": task.labeling.explanation, \"responseQA\": task.labeling.responseQA }",
                      "schema": {
                        "properties": {
                          "explanation": {
                            "type": "string"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "explanation": {
                                "properties": {
                                  "coherence": {
                                    "type": "number"
                                  },
                                  "compareWithLLM": {
                                    "type": "string"
                                  },
                                  "correctness": {
                                    "type": "number"
                                  },
                                  "helpfulness": {
                                    "type": "number"
                                  },
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  },
                                  "quality": {
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "feedback": {
                                "type": "string"
                              },
                              "resolution": {
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "result": {
                                    "type": "string"
                                  }
                                },
                                "type": "object"
                              },
                              "response": {
                                "properties": {
                                  "isCorrect": {
                                    "default": false,
                                    "type": "boolean"
                                  }
                                },
                                "type": "object"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Explanation",
                            "widget": "readonly"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "padding": "10px"
                            },
                            "title": "Prompt",
                            "widget": "readonly"
                          }
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "explanation": {
                            "coherence": {
                              "ui:options": {
                                "title": "Coherence/Clarity"
                              }
                            },
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human explanation with LLM explanation"
                              }
                            },
                            "correctness": {
                              "ui:options": {
                                "title": "Correctness/Completeness"
                              }
                            },
                            "helpfulness": {
                              "ui:options": {
                                "title": "Helpfulness/Understanding (overall rating)"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is explanation correct?"
                              }
                            },
                            "quality": {
                              "ui:options": {
                                "title": "Quality/Chain of thought"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM",
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "ui:readonly": true
                          },
                          "feedback": {
                            "ui:options": {
                              "rows": 4,
                              "title": "General R&E Feedback",
                              "widget": "readonly"
                            }
                          },
                          "resolution": {
                            "ui:options": {
                              "field": "tmpl",
                              "title": "QA Resolution",
                              "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                            }
                          },
                          "response": {
                            "compareWithLLM": {
                              "ui:options": {
                                "title": "Compare human response with LLM response"
                              }
                            },
                            "isCorrect": {
                              "ui:options": {
                                "chakra": {
                                  "fontWeight": "bold"
                                },
                                "title": "Is response correct?"
                              }
                            },
                            "ui:options": {
                              "classNames": "compact",
                              "label": false
                            },
                            "ui:order": [
                              "isCorrect",
                              "compareWithLLM"
                            ],
                            "ui:readonly": true
                          },
                          "ui:options": {
                            "label": false
                          },
                          "ui:order": [
                            "feedback",
                            "response",
                            "explanation",
                            "resolution"
                          ]
                        },
                        "ui:order": [
                          "prompt",
                          "response",
                          "explanation",
                          "responseQA"
                        ]
                      }
                    }
                  ],
                  "name": "QA Feedback",
                  "systemName": "view-response-qa-feedback"
                }
              ],
              "currentRole": "response-and-explanation-team",
              "name": "Response Creation",
              "systemName": "response-creation",
              "ui": {
                "colorScheme": "blue"
              }
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[collaboratorId=$userId]) = 0)",
                  "effects": [
                    {
                      "role": "qa-team",
                      "setCurrent": true,
                      "type": "set-current-user-as-collaborator"
                    },
                    {
                      "status": "qa-in-progress",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Claim for QA",
                  "systemName": "claim-task-for-qa",
                  "ui": {
                    "colorScheme": "green"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-waiting-qa"
                }
              ],
              "name": "Waiting QA Team",
              "systemName": "waiting-qa-team"
            },
            {
              "actions": [
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Provide QA review",
                  "effects": [
                    {
                      "clientComputedProps": [
                        {
                          "name": "QAResolution",
                          "valueFn": "(\n    $result:= function($b) { $b ? 'success': 'failure'};\n    $checks := [\n        {\n            \"reason\": \"Response is incorrect\",\n            \"result\": $result(formData.responseQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation is incorrect\",\n            \"result\": $result(formData.explanationQA.isCorrect)\n        },\n        {\n            \"reason\": \"Explanation Helpfulness/Understanding (overall rating) is below 4\",\n            \"result\": formData.explanationQA.helpfulness ? $result(formData.explanationQA.helpfulness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Correctness/Completeness is below 4\",\n            \"result\": formData.explanationQA.correctness ? $result(formData.explanationQA.correctness >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Coherence/Clarity is below 4\",\n            \"result\": formData.explanationQA.coherence ? $result(formData.explanationQA.coherence >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Explanation Quality/Chain of thought is below 4\",\n            \"result\": formData.explanationQA.quality ? $result(formData.explanationQA.quality >= 4) : \"unknown\" \n        },\n        {\n            \"reason\": \"Response is Worse than LLM\",\n            \"result\": formData.responseQA.compareWithLLM ? $result(formData.responseQA.compareWithLLM != 'worse') : 'unknown'\n        },\n        {\n            \"reason\": \"Explanation is Worse than LLM\",\n            \"result\": formData.explanationQA.compareWithLLM ? $result(formData.explanationQA.compareWithLLM != 'worse') : 'unknown'\n        }\n    ];\n    $reduce($checks, function ($res, $check) {\n        $res.result = 'unknown' ? $res : \n            ($check.result = 'unknown' ? $check : \n                ($res.result = 'failure' ? $res : \n                    ($check.result = 'failure' ? $check : $res)))\n    }, {\"reason\": \"All checks are good\", \"result\": 'success'})\n)"
                        },
                        {
                          "name": "action",
                          "valueFn": "($result := formData.QAResolution.result; $result = 'success' ? 'Complete task' : $result ='failure' ? 'Request R&E author to rewrite the response' : 'Cannot compute')"
                        }
                      ],
                      "message": "Please provide your QA review for the task",
                      "prepareInitialData": "($projectId := task.projectId; { \"preview\": task.id, \"prompt\": task.labeling.prompt, \"response\": task.labeling.response,  \"explanation\": task.labeling.explanation, \"autoResponse\": task.labeling.gptResponse.response, \"autoExplanation\": task.labeling.gptResponse.explanation, \"trainerExpertiseLevel\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.projects[projectId=$projectId].expertiseLevel })",
                      "schema": {
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "success"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Complete task"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          },
                          {
                            "if": {
                              "properties": {
                                "QAResolution": {
                                  "properties": {
                                    "result": {
                                      "const": "failure"
                                    }
                                  },
                                  "required": [
                                    "result"
                                  ]
                                }
                              }
                            },
                            "then": {
                              "properties": {
                                "action": {
                                  "const": "Request R&E author to rewrite the response"
                                }
                              },
                              "required": [
                                "action"
                              ]
                            }
                          }
                        ],
                        "properties": {
                          "QAResolution": {
                            "properties": {
                              "reason": {
                                "type": "string"
                              },
                              "result": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "autoExplanation": {
                            "type": "string"
                          },
                          "autoResponse": {
                            "type": "string"
                          },
                          "durationMinutes": {
                            "type": "number"
                          },
                          "explanation": {
                            "type": "string"
                          },
                          "explanationQA": {
                            "properties": {
                              "coherence": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "correctness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "helpfulness": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              },
                              "quality": {
                                "maximum": 5,
                                "minimum": 1,
                                "type": "number"
                              }
                            },
                            "required": [
                              "helpfulness",
                              "correctness",
                              "coherence",
                              "quality"
                            ],
                            "type": "object"
                          },
                          "feedback": {
                            "type": "string"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          },
                          "response": {
                            "type": "string"
                          },
                          "responseQA": {
                            "properties": {
                              "compareWithLLM": {
                                "oneOf": [
                                  {
                                    "const": "better",
                                    "title": "Better than LLM"
                                  },
                                  {
                                    "const": "on-par",
                                    "title": "On-par with LLM"
                                  },
                                  {
                                    "const": "worse",
                                    "title": "Worse than LLM"
                                  }
                                ],
                                "type": "string"
                              },
                              "isCorrect": {
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "compareWithLLM"
                            ],
                            "type": "object"
                          },
                          "trainerExpertiseLevel": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "durationMinutes"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "QAResolution": {
                          "ui:options": {
                            "field": "tmpl",
                            "title": "QA Resolution",
                            "tmpl": "<style>@scope(.nvidia-labeling-result) {\n .success { color: var(--chakra-colors-green-400);} \n .failure { color: var(--chakra-colors-red-400);}}</style><div class=\"nvidia-labeling-result\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                          }
                        },
                        "action": {
                          "ui:options": {
                            "title": "Apply action",
                            "widget": "readonly"
                          }
                        },
                        "autoExplanation": {
                          "ui:options": {
                            "title": "Auto step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "autoResponse": {
                          "ui:options": {
                            "title": "Auto Response",
                            "widget": "readonly"
                          }
                        },
                        "durationMinutes": {
                          "ui:options": {
                            "field": "duration",
                            "title": "Please enter time spent"
                          }
                        },
                        "explanation": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Step by step explanation",
                            "widget": "readonly"
                          }
                        },
                        "explanationQA": {
                          "coherence": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "incoherent"
                                },
                                {
                                  "label": "confusing, only some parts are coherent/clear"
                                },
                                {
                                  "label": "a little unclear, some inconsistencies or contradictions"
                                },
                                {
                                  "label": "one or two places where the wording is confusing"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Coherence/Clarity"
                            }
                          },
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human explanation with LLM explanation"
                            }
                          },
                          "correctness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "response is completely irrelevant to the prompt"
                                },
                                {
                                  "label": "some correct elements but is mostly wrong or incomplete"
                                },
                                {
                                  "label": "contains misleading information, minor hallucinations, omissions"
                                },
                                {
                                  "label": "small amount of missing information"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Correctness/Completeness"
                            }
                          },
                          "helpfulness": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "completely missed the essence of what the user wanted"
                                },
                                {
                                  "label": "borderline unhelpful"
                                },
                                {
                                  "label": "partially helpful but misses the overall goal"
                                },
                                {
                                  "label": "there is still some room for improvement"
                                },
                                {
                                  "label": ""
                                }
                              ],
                              "title": "Helpfulness/Understanding (overall rating)"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is explanation correct?"
                            }
                          },
                          "quality": {
                            "ui:options": {
                              "field": "star",
                              "options": [
                                {
                                  "label": "the response and explanation are not interlinked at all"
                                },
                                {
                                  "label": "the response and explanation have minimal linkage"
                                },
                                {
                                  "label": "the response and explanation are moderately linked"
                                },
                                {
                                  "label": "the response and explanation are closely linked"
                                },
                                {
                                  "label": "the response and explanation are very closely interlinked"
                                }
                              ],
                              "title": "Quality/Chain of thought"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM",
                            "helpfulness",
                            "correctness",
                            "coherence",
                            "quality"
                          ]
                        },
                        "feedback": {
                          "ui:options": {
                            "rows": 6,
                            "title": "Feedback",
                            "widget": "textarea"
                          }
                        },
                        "preview": {
                          "ui:widget": "preview"
                        },
                        "prompt": {
                          "ui:widget": "pretext"
                        },
                        "response": {
                          "ui:options": {
                            "style": {
                              "backgroundColor": "#384450",
                              "borderRadius": "5px",
                              "fontWeight": "bold",
                              "padding": "10px"
                            },
                            "title": "Response",
                            "widget": "readonly"
                          }
                        },
                        "responseQA": {
                          "compareWithLLM": {
                            "ui:options": {
                              "title": "Compare human response with LLM response"
                            }
                          },
                          "isCorrect": {
                            "ui:options": {
                              "chakra": {
                                "fontWeight": "bold"
                              },
                              "title": "Is response correct?"
                            }
                          },
                          "ui:options": {
                            "classNames": "compact",
                            "label": false
                          },
                          "ui:order": [
                            "isCorrect",
                            "compareWithLLM"
                          ]
                        },
                        "trainerExpertiseLevel": {
                          "ui:options": {
                            "field": "expertise-level",
                            "title": "R&E Trainer Expertise Level:"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "trainerExpertiseLevel",
                          "prompt",
                          "explanation",
                          "autoExplanation",
                          "explanationQA",
                          "response",
                          "autoResponse",
                          "responseQA",
                          "feedback",
                          "QAResolution",
                          "action",
                          "durationMinutes"
                        ]
                      }
                    },
                    {
                      "preparePatch": "($response := executionLog[effect='request-user-input'].result.userInput;{\"labeling\": $merge([task.labeling, { \"responseQA\": {\"response\": $response.responseQA,\"explanation\": $response.explanationQA,\"feedback\": $response.feedback, \"resolution\": $response.QAResolution, \"action\":  {\"type\": $response.action} }}])})",
                      "type": "update-task"
                    },
                    {
                      "prepareCollaboratorId": "workflowInstance.currentCollaboratorId",
                      "prepareDuration": "executionLog.result.userInput.durationMinutes",
                      "type": "add-duration"
                    },
                    {
                      "blocks": [
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'complete task')",
                          "effects": [
                            {
                              "level": "debug",
                              "message": "Completing task as a result of QA",
                              "type": "log"
                            },
                            {
                              "reason": "Task completed",
                              "type": "stop-current-workflow"
                            },
                            {
                              "prepareNotes": "\"Completing task as a result of QA\"",
                              "preparePatch": "{\"status\": \"completed\",  \"completedAt\": $now()}",
                              "type": "update-task"
                            },
                            {
                              "prepareTotalTime": "$sum(workflowInstance.collaborators.durationMinutes)+executionLog.result.userInput.durationMinutes",
                              "type": "create-version"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-success",
                              "type": "send-slack-notification"
                            }
                          ]
                        },
                        {
                          "condition": "($response := executionLog[effect='request-user-input'].result.userInput; $lowercase($response.action) = 'request r&e author to rewrite the response')",
                          "effects": [
                            {
                              "status": "response-creation",
                              "type": "set-workflow-status"
                            },
                            {
                              "prepareNotes": "\"Response QA failed, passing for rework. \"",
                              "preparePatch": "\n          {\n            \"status\": \"rework\"\n                }\n            ",
                              "type": "update-task"
                            },
                            {
                              "role": "response-and-explanation-team",
                              "type": "set-collaborator-current"
                            },
                            {
                              "prepareReceivers": "[workflowInstance.collaborators[role='response-and-explanation-team'].collaborator.slackUserId]",
                              "prepareReplacements": "($response := executionLog[effect='request-user-input'].result.userInput; { \"trainer\": workflowInstance.collaborators[role='response-and-explanation-team'].collaborator, \"reviewer\": user, \"conversationId\": task.id, \"conversationLink\": conversationLink , \"feedback\": $response.feedback, \"reason\": $response.QAResolution.reason, \"stage\": \"R&E QA\" })",
                              "safeExecution": true,
                              "template": "feedback-failure",
                              "type": "send-slack-notification"
                            }
                          ]
                        }
                      ],
                      "type": "conditional"
                    }
                  ],
                  "name": "Provide Feedback",
                  "systemName": "provide-feedback",
                  "ui": {
                    "colorScheme": "blue"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"qa-team\" and collaboratorId=$userId]) = 1)",
                  "description": "Unclaim this QA task",
                  "effects": [
                    {
                      "schema": {
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "reason"
                        ],
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "reason": {
                          "ui:options": {
                            "rows": 10,
                            "title": "Please provide reason for unclaiming",
                            "widget": "textarea"
                          }
                        }
                      }
                    },
                    {
                      "role": "qa-team",
                      "type": "unset-current-user-as-collaborator"
                    },
                    {
                      "status": "waiting-qa-team",
                      "type": "set-workflow-status"
                    }
                  ],
                  "name": "Unclaim",
                  "systemName": "unclaim-from-qa",
                  "ui": {
                    "colorScheme": "yellow"
                  }
                },
                {
                  "condition": "(\n$userId := user.userId;\n$count(workflow.collaborators[role=\"response-and-explanation-team\" and collaboratorId=$userId]) = 1) and $not(user.role.permissions.has('workflow.labelingPreview'))",
                  "description": "View task response and explanation",
                  "effects": [
                    {
                      "message": "Current response",
                      "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
                      "schema": {
                        "properties": {
                          "humanResponse": {
                            "properties": {
                              "explanation": {
                                "type": "string"
                              },
                              "response": {
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "preview": {
                            "type": "number"
                          },
                          "prompt": {
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "type": "request-user-input",
                      "uiSchema": {
                        "humanResponse": {
                          "explanation": {
                            "ui:options": {
                              "title": "Step by step explanation",
                              "widget": "readonly"
                            }
                          },
                          "response": {
                            "ui:options": {
                              "title": "Response",
                              "widget": "readonly"
                            }
                          },
                          "ui:options": {
                            "title": "R & E"
                          },
                          "ui:order": [
                            "response",
                            "explanation"
                          ]
                        },
                        "preview": {
                          "ui:options": {
                            "widget": "preview"
                          }
                        },
                        "prompt": {
                          "ui:options": {
                            "title": "Prompt",
                            "widget": "pretext"
                          }
                        },
                        "ui:options": {
                          "classNames": "nvidia-form-layout"
                        },
                        "ui:order": [
                          "preview",
                          "prompt",
                          "humanResponse"
                        ]
                      }
                    }
                  ],
                  "name": "View",
                  "systemName": "view-task-response-qa-in-progress"
                },
                {
                  "condition": "$not(task.labeling.gptResponse)",
                  "description": "Call OpenAI API to generate auto response",
                  "effects": [
                    {
                      "message": "Calling Open AI to generate response",
                      "type": "log"
                    },
                    {
                      "prepareRequest": "({\"messages\": [{\"role\": \"user\", \"content\": [{\"type\": \"text\", \"text\": \"You are a skilled Professional in Data Interpretation. Your task is to analyze a given image and respond to questions based on the image as if you are a 'Researcher' by profession. Your response should be written in a complete, natural, and coherent manner, directly addressing the prompt without including steps unless they enhance clarity. Please review the image and answer the following question. Provide your answer in json format with 2 fields: answer - 1 sentence answer summary, explanation - array of 1-5 steps to obtain the answer.\"}, {\"type\": \"text\", \"text\": task.labeling.prompt}, {\"type\": \"image_url\", \"image_url\": { \"url\": \"data:image/png;base64,\" & content}}]}]})",
                      "prepareResponse": "($result := $eval(response.choices[0].message.content); {\"response\":  $result.answer, \"explanation\": $join($result.explanation, '\n'), \"raw\":  response.choices[0].message.content})",
                      "safeExecution": true,
                      "type": "call-open-ai"
                    },
                    {
                      "condition": "(executionLog[effect='call-open-ai'].success)",
                      "preparePatch": "($response := executionLog[effect='call-open-ai'].result; {\"labeling\": $merge([task.labeling, {\"gptResponse\": $response}])})",
                      "type": "update-task"
                    }
                  ],
                  "name": "Generate Auto Response",
                  "systemName": "generate-auto-response",
                  "ui": {
                    "colorScheme": "purple"
                  }
                }
              ],
              "currentRole": "qa-team",
              "name": "QA in Progress",
              "systemName": "qa-in-progress"
            }
          ]
        },
        "viewAllHistoryConfiguration": [
          {
            "prepareInitialData": "{ \"preview\": task.id}",
            "schema": {
              "properties": {
                "preview": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "systemName": "unclaimed-prompt-creation",
            "uiSchema": {
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-waiting-prompt-qa",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"prompt\": task.labeling.prompt}",
            "schema": {
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-creation-prompt-qa-in-progress",
            "uiSchema": {
              "prompt": {
                "ui:options": {
                  "style": {
                    "backgroundColor": "#384450",
                    "borderRadius": "5px",
                    "fontWeight": "bold",
                    "padding": "10px"
                  },
                  "title": "Prompt",
                  "widget": "readonly"
                }
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "prompt"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-prompt-creation",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"promptQA\": task.labeling.promptQA}",
            "schema": {
              "properties": {
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "prompt-qa-in-progress-waiting-response-team",
            "uiSchema": {
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "promptQA"
              ]
            }
          },
          {
            "prepareInitialData": "{   \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation} }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "response-creation-qa-in-progress",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "style": {
                      "backgroundColor": "#384450",
                      "borderRadius": "5px",
                      "fontWeight": "bold",
                      "padding": "10px"
                    },
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "humanResponse"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-response-creation",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "qa-in-progress-completed",
            "uiSchema": {
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "responseQA"
              ]
            }
          },
          {
            "prepareInitialData": "{ \"preview\": task.id, \"prompt\": task.labeling.prompt, \"gptResponse\": task.labeling.gptResponse, \"humanResponse\": { \"response\": task.labeling.response, \"explanation\": task.labeling.explanation}, \"promptQA\": task.labeling.promptQA, \"responseQA\": task.labeling.responseQA }",
            "schema": {
              "properties": {
                "humanResponse": {
                  "properties": {
                    "explanation": {
                      "type": "string"
                    },
                    "response": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "preview": {
                  "type": "number"
                },
                "prompt": {
                  "type": "string"
                },
                "promptQA": {
                  "properties": {
                    "feedback": {
                      "type": "string"
                    },
                    "prompt": {
                      "dependencies": {
                        "isCorrect": {
                          "oneOf": [
                            {
                              "properties": {
                                "containsAnswerInText": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "isCorrect": {
                                  "enum": [
                                    false
                                  ]
                                },
                                "isOCR": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notAQuestion": {
                                  "default": false,
                                  "type": "boolean"
                                },
                                "notIntelligible": {
                                  "default": false,
                                  "type": "boolean"
                                }
                              }
                            },
                            {
                              "properties": {
                                "isCorrect": {
                                  "enum": [
                                    true
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      },
                      "properties": {
                        "creativity": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "isUnderstandable": {
                          "default": false,
                          "type": "boolean"
                        },
                        "relevance": {
                          "type": "number"
                        },
                        "typeOfPrompt": {
                          "type": "string"
                        }
                      }
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "responseQA": {
                  "properties": {
                    "explanation": {
                      "properties": {
                        "coherence": {
                          "type": "number"
                        },
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "correctness": {
                          "type": "number"
                        },
                        "helpfulness": {
                          "type": "number"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        },
                        "quality": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "feedback": {
                      "type": "string"
                    },
                    "resolution": {
                      "properties": {
                        "reason": {
                          "type": "string"
                        },
                        "result": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "response": {
                      "properties": {
                        "compareWithLLM": {
                          "type": "string"
                        },
                        "isCorrect": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "systemName": "without_history",
            "uiSchema": {
              "humanResponse": {
                "explanation": {
                  "ui:options": {
                    "title": "Step by step explanation",
                    "widget": "readonly"
                  }
                },
                "response": {
                  "ui:options": {
                    "title": "Response",
                    "widget": "readonly"
                  }
                },
                "ui:options": {
                  "title": "Human Response"
                },
                "ui:order": [
                  "response",
                  "explanation"
                ]
              },
              "preview": {
                "ui:options": {
                  "widget": "preview"
                }
              },
              "prompt": {
                "ui:options": {
                  "title": "Prompt",
                  "widget": "pretext"
                }
              },
              "promptQA": {
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General Prompt Feedback",
                    "widget": "readonly"
                  }
                },
                "prompt": {
                  "containsAnswerInText": {
                    "ui:options": {
                      "title": "States the information necessary to answer the prompt within the question itself, removing the need for visual reasoning"
                    }
                  },
                  "creativity": {
                    "ui:options": {
                      "title": "Creativity"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Basic requirements in check?"
                    }
                  },
                  "isOCR": {
                    "ui:options": {
                      "title": "Asks for simple extractive tasks or OCR"
                    }
                  },
                  "isUnderstandable": {
                    "ui:options": {
                      "title": "Understandable?"
                    }
                  },
                  "notAQuestion": {
                    "ui:options": {
                      "title": "Doesn't require the image to answer the question"
                    }
                  },
                  "notIntelligible": {
                    "ui:options": {
                      "title": "Are not intelligible and clear to understand"
                    }
                  },
                  "relevance": {
                    "ui:options": {
                      "title": "Relevance"
                    }
                  },
                  "typeOfPrompt": {
                    "ui:options": {
                      "title": "Type of prompt"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "notAQuestion",
                    "isOCR",
                    "containsAnswerInText",
                    "notIntelligible",
                    "isUnderstandable",
                    "relevance",
                    "creativity",
                    "typeOfPrompt"
                  ],
                  "ui:readonly": true
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "ui:options": {
                  "title": "Prompt QA"
                },
                "ui:order": [
                  "feedback",
                  "prompt",
                  "resolution"
                ]
              },
              "responseQA": {
                "explanation": {
                  "coherence": {
                    "ui:options": {
                      "title": "Coherence/Clarity"
                    }
                  },
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human explanation with LLM explanation"
                    }
                  },
                  "correctness": {
                    "ui:options": {
                      "title": "Correctness/Completeness"
                    }
                  },
                  "helpfulness": {
                    "ui:options": {
                      "title": "Helpfulness/Understanding (overall rating)"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is explanation correct?"
                    }
                  },
                  "quality": {
                    "ui:options": {
                      "title": "Quality/Chain of thought"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM",
                    "helpfulness",
                    "correctness",
                    "coherence",
                    "quality"
                  ],
                  "ui:readonly": true
                },
                "feedback": {
                  "ui:options": {
                    "rows": 4,
                    "title": "General R&E Feedback",
                    "widget": "readonly"
                  }
                },
                "resolution": {
                  "ui:options": {
                    "field": "tmpl",
                    "title": "QA Resolution",
                    "tmpl": "<style>\n .nvidia-prompt-qa > .success { color: var(--chakra-colors-green-400);} \n .nvidia-prompt-qa > .failure { color: var(--chakra-colors-red-400);}</style><div class=\"nvidia-prompt-qa\">\n<%if(value.result === 'unknown'){%><div>Please fill all required values, cannot compute check \"<%=value.reason%>\"</div><%} else if (value.result === 'failure') {%><div class=\"failure\"><%=value.reason%></div><%} else {%><div class=\"success\"><%=value.reason%></div><%}%></div>"
                  }
                },
                "response": {
                  "compareWithLLM": {
                    "ui:options": {
                      "title": "Compare human response with LLM response"
                    }
                  },
                  "isCorrect": {
                    "ui:options": {
                      "chakra": {
                        "fontWeight": "bold"
                      },
                      "title": "Is response correct?"
                    }
                  },
                  "ui:options": {
                    "classNames": "compact",
                    "label": false
                  },
                  "ui:order": [
                    "isCorrect",
                    "compareWithLLM"
                  ],
                  "ui:readonly": true
                },
                "ui:options": {
                  "title": "Response QA"
                },
                "ui:order": [
                  "feedback",
                  "response",
                  "explanation",
                  "resolution"
                ]
              },
              "ui:options": {
                "classNames": "nvidia-form-layout"
              },
              "ui:order": [
                "preview",
                "prompt",
                "promptQA",
                "humanResponse",
                "responseQA"
              ]
            }
          }
        ]
      },
      "project_id": 1,
      "datastream_metadata": {
        "uuid": "d621adf5-b407-4709-925c-855901100101",
        "source_timestamp": 1732009055000
      }
    }
  ]
}